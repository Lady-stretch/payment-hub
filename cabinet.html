<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Lady Stretch | Evolution Portal</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@100;300;400;600&display=swap" rel="stylesheet">
    <style>
        :root { --accent: #b085ff; --glass: rgba(255, 255, 255, 0.05); --border: rgba(255, 255, 255, 0.15); --bg: #050508; }
        body, html { margin: 0; padding: 0; min-height: 100vh; background: var(--bg); font-family: 'Montserrat', sans-serif; color: #fff; overflow-x: hidden; -webkit-tap-highlight-color: transparent; }
        .universe { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -3; background: radial-gradient(circle at 50% 0%, #1a103d 0%, #050508 100%); }
        .aurora-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -2; overflow: hidden; opacity: 0.6; }
        .aurora { position: absolute; width: 200%; height: 200%; top: -50%; left: -50%; background: radial-gradient(circle at 30% 30%, #7a5af830 0%, transparent 40%), radial-gradient(circle at 70% 60%, #24f0ff20 0%, transparent 40%); filter: blur(100px); animation: aurora-drift 25s infinite alternate ease-in-out; }
        @keyframes aurora-drift { 0% { transform: rotate(0deg) scale(1); } 100% { transform: rotate(15deg) scale(1.2); } }
        #starfield { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; }
        header { position: fixed; top: 0; left: 0; width: 100%; height: 75px; display: flex; align-items: center; justify-content: space-between; padding: 0 20px; box-sizing: border-box; z-index: 1000; background: rgba(0,0,0,0.6); backdrop-filter: blur(25px); border-bottom: 1px solid var(--border); }
        .logo-wrap { width: 42px; height: 42px; border-radius: 50%; border: 1.5px solid var(--accent); overflow: hidden; flex-shrink: 0; }
        .logo-wrap img { width: 100%; height: 100%; object-fit: cover; }
        .h-title { flex: 1; text-align: center; font-weight: 300; letter-spacing: 2px; font-size: 11px; text-transform: uppercase; }
        .container { max-width: 1100px; margin: 0 auto; padding: 100px 15px 40px; display: grid; grid-template-columns: 1fr 380px; gap: 20px; }
        @media (max-width: 950px) { .container { grid-template-columns: 1fr; } }
        .glass-card { background: var(--glass); backdrop-filter: blur(25px); -webkit-backdrop-filter: blur(25px); border: 1px solid var(--border); border-radius: 30px; padding: 25px; box-shadow: 0 20px 40px rgba(0,0,0,0.4); }
        .grid-dirs { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-top: 20px; }
        @media (max-width: 480px) { .grid-dirs { grid-template-columns: 1fr 1fr; } }
        .btn-dir { background: rgba(255,255,255,0.03); border: 1px solid var(--border); border-radius: 20px; padding: 18px 5px; text-align: center; font-size: 10px; cursor: pointer; transition: 0.3s; color: rgba(255,255,255,0.7); }
        .btn-dir.active { background: #fff; color: #000; font-weight: 600; transform: scale(1.03); }
        .tag { font-size: 9px; letter-spacing: 2px; color: var(--accent); font-weight: 600; text-transform: uppercase; margin-bottom: 15px; display: block; }
        .main-stat { font-size: 48px; font-weight: 100; margin: 10px 0; letter-spacing: -2px; }
        .main-stat span { font-size: 16px; color: #666; }
        .bio-content { font-size: 14px; line-height: 1.7; font-weight: 300; color: rgba(255,255,255,0.8); }
        .bio-content b { color: var(--accent); }
        .input-panel { margin-top: 20px; padding-top: 20px; border-top: 1px solid var(--border); display: none; }
        .input-panel.visible { display: block; animation: fadeInUp 0.5s ease; }
        .f-input { width: 100%; background: transparent; border: none; border-bottom: 2px solid var(--accent); color: #fff; font-size: 32px; text-align: center; outline: none; margin-bottom: 20px; }
        .save-btn { width: 100%; background: #fff; color: #000; border: none; padding: 22px; border-radius: 25px; font-weight: 600; text-transform: uppercase; letter-spacing: 2px; cursor: pointer; }
        .modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); backdrop-filter: blur(20px); z-index: 2000; display: none; align-items: center; justify-content: center; }
        .modal-card { background: var(--glass); border: 1px solid #fff; border-radius: 40px; padding: 40px 25px; max-width: 90%; text-align: center; }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>
    <div class="universe"></div>
    <div class="aurora-container"><div class="aurora"></div></div>
    <canvas id="starfield"></canvas>
    <header>
        <div class="logo-wrap"><img src="https://ladysfit.ru/favicon.ico" alt="LS"></div>
        <div class="h-title" id="h-name">LADY STRETCH EVOLUTION</div>
        <div style="width: 42px; opacity: 0.3; font-size: 8px;">V4.2</div>
    </header>
    <div class="container">
        <div class="col-left">
            <div class="glass-card">
                <span class="tag">–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞</span>
                <div style="height: 220px;"><canvas id="chartCanvas"></canvas></div>
            </div>
            <div class="grid-dirs">
                <div class="btn-dir" onclick="openBranch(this, 'abs')">–Ø–≥–æ–¥–∏—Ü—ã+–ü—Ä–µ—Å—Å</div>
                <div class="btn-dir" onclick="openBranch(this, 'spine')">–ó–¥–æ—Ä–æ–≤–∞—è —Å–ø–∏–Ω–∞</div>
                <div class="btn-dir" onclick="openBranch(this, 'stretch')">–®–ø–∞–≥–∞—Ç</div>
                <div class="btn-dir" onclick="openBranch(this, 'sky')">Sky Stretching</div>
                <div class="btn-dir" onclick="openBranch(this, 'tabata')">–¢–∞–±–∞—Ç–∞</div>
                <div class="btn-dir" onclick="openBranch(this, 'sculpt')">Body Sculpt</div>
            </div>
        </div>
        <div class="col-right">
            <div class="glass-card" style="border-left: 3px solid var(--accent);">
                <span class="tag" id="serial-label">–ë–∏–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –ø–∞—Å–ø–æ—Ä—Ç</span>
                <div class="bio-content" id="bio-info">–í—ã–±–µ—Ä–∏—Ç–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –≤–∞—à—É –ª–∏—á–Ω—É—é –∏—Å—Ç–æ—Ä–∏—é –ø—Ä–µ–æ–±—Ä–∞–∂–µ–Ω–∏—è...</div>
            </div>
            <div class="glass-card" style="margin-top:20px;">
                <span class="tag">–†–µ–∑—É–ª—å—Ç–∞—Ç–∏–≤–Ω–æ—Å—Ç—å</span>
                <div class="main-stat" id="total-stat">0 <span>–∑–∞–Ω—è—Ç–∏–π</span></div>
                <div id="monthly-breakdown" style="font-size: 11px; opacity: 0.5; margin-bottom: 15px;"></div>
                <div class="input-panel" id="input-block">
                    <input type="number" class="f-input" id="val-entry" placeholder="0" pattern="\d*">
                    <button class="save-btn" onclick="saveSession()">–ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å —Å–µ—Ä–∏—é</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal" id="milestone-modal" onclick="this.style.display='none'">
        <div class="modal-card">
            <span class="tag">–ù–æ–≤–æ–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ</span>
            <h1 id="ms-title" style="font-weight: 100; font-size: 32px; margin: 15px 0;">12</h1>
            <p id="ms-desc" class="bio-content"></p>
            <button class="save-btn" style="margin-top: 25px;">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Å–µ—Ä–∏–∞–ª</button>
        </div>
    </div>

<script>
    const tg = window.Telegram.WebApp;
    tg.expand();
    const name = tg.initDataUnsafe?.user?.first_name || "Lady";
    document.getElementById('h-name').innerText = `EVOLUTION: ${name.toUpperCase()}`;

    let db = JSON.parse(localStorage.getItem('ls_v4_final')) || {
        yearly: [0,0,0,0,0,0,0,0,0,0,0,0], 
        dirs: { abs: 0, spine: 0, stretch: 0, sky: 0, tabata: 0, sculpt: 0 },
        levels: { abs: 0, spine: 0, stretch: 0, sky: 0, tabata: 0, sculpt: 0 } 
    };

    const serialScripts = {
        spine: { hook: "–•–æ—á–µ—à—å —É–∑–Ω–∞—Ç—å, –∫–∞–∫ —Ç–≤–æ–∏ –º–µ–∂–ø–æ–∑–≤–æ–Ω–æ—á–Ω—ã–µ –¥–∏—Å–∫–∏ –Ω–∞—á–Ω—É—Ç ¬´–ø–∏—Ç—å¬ª –≤–æ–¥—É –ø–æ—Å–ª–µ 12 –∑–∞–Ω—è—Ç–∏–π? üíß", lvl12: "<b>–≠–ø–∏–∑–æ–¥ 12:</b> –°–ø–∏–Ω–∞ –±–æ–ª—å—à–µ –Ω–µ —Ç—Ä–∞—Ç–∏—Ç —ç–Ω–µ—Ä–≥–∏—é –Ω–∞ –±–æ—Ä—å–±—É —Å –≥—Ä–∞–≤–∏—Ç–∞—Ü–∏–µ–π. –ü–ª–µ—á–∏ –æ–ø—É—Å—Ç–∏–ª–∏—Å—å —Å–∞–º–∏. –ê –∑–Ω–∞–µ—à—å, —á—Ç–æ –±—É–¥–µ—Ç –Ω–∞ 24-–º –∑–∞–Ω—è—Ç–∏–∏?", lvl24: "<b>–§–∏–Ω–∞–ª:</b> –î–µ–∫–æ–º–ø—Ä–µ—Å—Å–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞. –†–æ—Å—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏–ª—Å—è, —Ç—ã ‚Äî —Å–∞–º–æ –∏–∑—è—â–µ—Å—Ç–≤–æ! ‚ú®" },
        stretch: { hook: "–¢–≤–æ–∏ —Å–≤—è–∑–∫–∏ —Å—Ç–∞–Ω—É—Ç —ç–ª–∞—Å—Ç–∏—á–Ω—ã–º–∏ –∫–∞–∫ —à–µ–ª–∫ —á–µ—Ä–µ–∑ 12 –∑–∞–Ω—è—Ç–∏–π. –ù–∞—á–Ω–µ–º –ø—Ä–µ–≤—Ä–∞—â–µ–Ω–∏–µ? üå∏", lvl12: "<b>–≠–ø–∏–∑–æ–¥ 12:</b> –ú–∏–∫—Ä–æ—Ü–∏—Ä–∫—É–ª—è—Ü–∏—è —É—Å–∏–ª–∏–ª–∞—Å—å. –≠—Ç–æ –∂–µ–Ω—Å–∫–æ–µ –∑–¥–æ—Ä–æ–≤—å–µ –∏ –ª–µ–≥–∫–∞—è –ø–æ—Ö–æ–¥–∫–∞. –ò–¥–µ–º –∑–∞ —ç–Ω–¥–æ—Ä—Ñ–∏–Ω–∞–º–∏ –∫ 24 –∑–∞–Ω—è—Ç–∏—é?", lvl24: "<b>–§–∏–Ω–∞–ª:</b> –¢–∫–∞–Ω–∏ –∫–∞–∫ —à–µ–ª–∫, —Ç–µ–ª–æ –Ω–∞–ø–æ–ª–Ω–µ–Ω–æ –≥–∏–±–∫–æ—Å—Ç—å—é. –¢—ã –≤–µ–ª–∏–∫–æ–ª–µ–ø–Ω–∞! üî•" },
        abs: { hook: "–¢–≤–æ–π –ø—Ä–µ—Å—Å ‚Äî —ç—Ç–æ –¥–µ—Ç–æ–∫—Å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –æ—Ä–≥–∞–Ω–æ–≤. –ù–∞—á–Ω–µ–º —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—é? ‚ö°", lvl12: "<b>–≠–ø–∏–∑–æ–¥ 12:</b> –í–∏—Å—Ü–µ—Ä–∞–ª—å–Ω—ã–π –º–∞—Å—Å–∞–∂ —Å—Ä–∞–±–æ—Ç–∞–ª. –ú–µ—Ç–∞–±–æ–ª–∏–∑–º —É—Å–∫–æ—Ä–∏–ª—Å—è, –∂–∏–≤–æ—Ç —Å—Ç–∞–ª –ø–ª–æ—Å–∫–∏–º. –ß—Ç–æ –±—É–¥–µ—Ç –Ω–∞ 24-–º?", lvl24: "<b>–§–∏–Ω–∞–ª:</b> –ú—ã—à–µ—á–Ω—ã–π –∫–æ—Ä—Å–µ—Ç ‚Äî —Ç–≤–æ—è –Ω–µ–≤–∏–¥–∏–º–∞—è –±—Ä–æ–Ω—è. –≠–Ω–µ—Ä–≥–∏—è –Ω–∞ –ø–∏–∫–µ! üíé" },
        sky: { hook: "–•–æ—á–µ—à—å –ø–æ—á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å ¬´—ç—Ñ—Ñ–µ–∫—Ç –Ω–µ–≤–µ—Å–æ–º–æ—Å—Ç–∏¬ª? –ü–æ–ª–µ—Ç–µ–ª–∏! ‚òÅÔ∏è", lvl12: "<b>–≠–ø–∏–∑–æ–¥ 12:</b> –õ–∏–º—Ñ–æ–¥—Ä–µ–Ω–∞–∂ –≤ –≥–∞–º–∞–∫–µ —É–±—Ä–∞–ª –≤—Å–µ –æ—Ç–µ–∫–∏. –õ–∏—Ü–æ —Å–∏—è–µ—Ç! –ì–æ—Ç–æ–≤–∞ –∫ –ø–æ–ª–Ω–æ–π –Ω–µ–≤–µ—Å–æ–º–æ—Å—Ç–∏ –Ω–∞ 24-–º?", lvl24: "<b>–§–∏–Ω–∞–ª:</b> –ì—Ä–∞–≤–∏—Ç–∞—Ü–∏—è –±–æ–ª—å—à–µ –Ω–∞–¥ —Ç–æ–±–æ–π –Ω–µ –≤–ª–∞—Å—Ç–Ω–∞. –¢—ã –±—É–∫–≤–∞–ª—å–Ω–æ –ø–∞—Ä–∏—à—å. üïäÔ∏è" },
        tabata: { hook: "–ì–æ—Ç–æ–≤–∞ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–∂–∏–≥–∞–Ω–∏–µ –∂–∏—Ä–∞ –¥–∞–∂–µ –≤–æ –≤—Ä–µ–º—è —Å–Ω–∞? üí•", lvl12: "<b>–≠–ø–∏–∑–æ–¥ 12:</b> –ú–∏—Ç–æ—Ö–æ–Ω–¥—Ä–∏–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã. –í—ã–Ω–æ—Å–ª–∏–≤–æ—Å—Ç—å +25%. –ù–∞ 24-–º —Ç—ã —Å—Ç–∞–Ω–µ—à—å –∞—Ç–æ–º–Ω—ã–º —Ä–µ–∞–∫—Ç–æ—Ä–æ–º –∫—Ä–∞—Å–æ—Ç—ã!", lvl24: "<b>–§–∏–Ω–∞–ª:</b> –≠—Ñ—Ñ–µ–∫—Ç Afterburn —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ø–æ–ª–Ω—É—é. –¢—ã ‚Äî —Å–∞–º–∞ —ç–Ω–µ—Ä–≥–∏—è! üöÄ" },
        sculpt: { hook: "–°–æ–∑–¥–∞–¥–∏–º —Ç–≤–æ–π –º–∏–∫—Ä–æ—Ä–µ–ª—å–µ—Ñ? –ö–∞–∂–¥–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ ‚Äî —à—Ç—Ä–∏—Ö –º–∞—Å—Ç–µ—Ä–∞. üé®", lvl12: "<b>–≠–ø–∏–∑–æ–¥ 12:</b> –õ–∏–Ω–∏–∏ —Ç–µ–ª–∞ —Å—Ç–∞–ª–∏ —á–µ—Ç–∫–∏–º–∏. –ö–æ–∂–∞ –ø–æ–¥—Ç—è–Ω—É—Ç–∞. –î–æ–≤–µ–¥–µ–º —Å–∏–ª—É—ç—Ç –¥–æ –∏–¥–µ–∞–ª–∞ –∫ 24-–º—É?", lvl24: "<b>–§–∏–Ω–∞–ª:</b> –°–∫—É–ª—å–ø—Ç—É—Ä–∞ –≥–æ—Ç–æ–≤–∞. –¢—ã —Å–æ–∑–¥–∞–ª–∞ —à–µ–¥–µ–≤—Ä —Å–≤–æ–∏–º —Ç–µ–ª–æ–º! üëë" }
    };

    const ctx = document.getElementById('chartCanvas').getContext('2d');
    const chart = new Chart(ctx, {
        type: 'bar',
        data: { labels: ['–Ø','–§','–ú','–ê','–ú','–ò','–ò','–ê','–°','–û','–ù','–î'], datasets: [{ data: db.yearly, backgroundColor: '#b085ff', borderRadius: 5 }] },
        options: { responsive: true, maintainAspectRatio: false, plugins: {legend: {display: false}}, scales: { y:{display: false}, x:{grid:{display:false}, ticks:{color:'#555'}} } }
    });

    let activeDir = '';
    function openBranch(btn, type) {
        document.querySelectorAll('.btn-dir').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        activeDir = type;
        const count = db.dirs[type];
        document.getElementById('serial-label').innerText = "–¢–ï–ö–£–©–ò–ô –≠–ü–ò–ó–û–î";
        let txt = serialScripts[type].hook;
        if(count >= 12) txt = serialScripts[type].lvl12;
        if(count >= 24) txt = serialScripts[type].lvl24;
        document.getElementById('bio-info').innerHTML = txt;
        document.getElementById('input-block').classList.add('visible');
    }

    function saveSession() {
        const val = parseInt(document.getElementById('val-entry').value) || 0;
        if(val <= 0) return;
        const old = db.dirs[activeDir];
        db.dirs[activeDir] += val;
        db.yearly[new Date().getMonth()] += val;
        if(old < 12 && db.dirs[activeDir] >= 12) showM(activeDir, 12);
        if(old < 24 && db.dirs[activeDir] >= 24) showM(activeDir, 24);
        update();
        document.getElementById('val-entry').value = '';
        tg.HapticFeedback.notificationOccurred('success');
    }

    function showM(dir, l) {
        document.getElementById('ms-title').innerText = l + ' –ó–ê–ù–Ø–¢–ò–ô';
        document.getElementById('ms-desc').innerHTML = serialScripts[dir]['lvl'+l];
        document.getElementById('milestone-modal').style.display = 'flex';
    }

    function update() {
        const total = Object.values(db.dirs).reduce((a, b) => a + b, 0);
        document.getElementById('total-stat').innerHTML = `${total} <span>–∑–∞–Ω—è—Ç–∏–π</span>`;
        chart.data.datasets[0].data = db.yearly;
        chart.update();
        localStorage.setItem('ls_v4_final', JSON.stringify(db));
    }

    const sCanvas = document.getElementById('starfield');
    const sCtx = sCanvas.getContext('2d');
    let stars = [];
    function init() { sCanvas.width = window.innerWidth; sCanvas.height = window.innerHeight; stars = Array.from({length: 80}, () => ({ x: Math.random()*sCanvas.width, y: Math.random()*sCanvas.height, size: Math.random(), t: Math.random()*6, s: 0.02 })); }
    function draw() { sCtx.clearRect(0,0,sCanvas.width,sCanvas.height); stars.forEach(s => { sCtx.globalAlpha = (Math.sin(s.t)+1)/2; sCtx.beginPath(); sCtx.arc(s.x, s.y, s.size, 0, 7); sCtx.fillStyle="#fff"; sCtx.fill(); s.t+=s.s; }); requestAnimationFrame(draw); }
    init(); draw(); window.onresize = init; update();
</script>
</body>
</html>
