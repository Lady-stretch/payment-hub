<!DOCTYPE html>

<html lang="ru">

<head>

    <meta charset="UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>LS Achievement Portal | Final Edition 2026</title>

    

    <script src="https://telegram.org/js/telegram-web-app.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@100;300;400;600&display=swap" rel="stylesheet">

    

    <style>

        :root {

            --accent: #b085ff;

            --glass: rgba(255, 255, 255, 0.05);

            --border: rgba(255, 255, 255, 0.15);

            --glow: rgba(176, 133, 255, 0.3);

            --bg: #050508;

        }



        body, html {

            margin: 0; padding: 0; min-height: 100vh;

            background: var(--bg); font-family: 'Montserrat', sans-serif;

            color: #fff; overflow-x: hidden; -webkit-tap-highlight-color: transparent;

        }



        /* –ú–ù–û–ì–û–°–õ–û–ô–ù–û–ï –ù–ï–ë–û (AURORA + STARS) */

        .universe {

            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -3;

            background: radial-gradient(circle at 50% 0%, #1a103d 0%, #050508 100%);

        }

        

        .aurora-container {

            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -2;

            overflow: hidden; opacity: 0.6;

        }



        .aurora {

            position: absolute; width: 200%; height: 200%; top: -50%; left: -50%;

            background: radial-gradient(circle at 30% 30%, #7a5af830 0%, transparent 40%),

                        radial-gradient(circle at 70% 60%, #24f0ff20 0%, transparent 40%);

            filter: blur(100px); animation: aurora-drift 25s infinite alternate ease-in-out;

        }



        @keyframes aurora-drift {

            0% { transform: rotate(0deg) scale(1); }

            100% { transform: rotate(15deg) scale(1.2); }

        }



        #starfield { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; }



        /* –ò–ù–¢–ï–†–§–ï–ô–° */

        header {

            position: fixed; top: 0; left: 0; width: 100%; height: 85px;

            display: flex; align-items: center; justify-content: space-between;

            padding: 0 30px; box-sizing: border-box; z-index: 1000;

            background: rgba(0,0,0,0.5); backdrop-filter: blur(30px);

            border-bottom: 1px solid var(--border);

        }



        .logo-wrap {

            width: 48px; height: 48px; border-radius: 50%;

            border: 1.5px solid var(--accent); overflow: hidden;

            box-shadow: 0 0 20px var(--glow);

        }

        .logo-wrap img { width: 100%; height: 100%; object-fit: cover; }



        .h-title {

            flex: 1; text-align: center; font-weight: 100; letter-spacing: 4px;

            font-size: 12px; text-transform: uppercase; color: #fff;

        }



        /* –ö–û–ù–¢–ï–ô–ù–ï–†: –ò–î–ï–ê–õ–¨–ù–´–ô DESKTOP -> MOBILE */

        .container {

            max-width: 1200px; margin: 0 auto; padding: 120px 20px 60px;

            display: grid; grid-template-columns: 1fr 400px; gap: 40px;

        }



        @media (max-width: 1000px) {

            .container { grid-template-columns: 1fr; padding-top: 100px; gap: 25px; }

            .h-title { font-size: 10px; letter-spacing: 2px; }

        }



        .glass-card {

            background: var(--glass); backdrop-filter: blur(30px);

            -webkit-backdrop-filter: blur(30px);

            border: 1px solid var(--border); border-radius: 40px;

            padding: 35px; box-shadow: 0 25px 50px rgba(0,0,0,0.5);

            transition: transform 0.3s ease, border-color 0.3s ease;

        }



        /* –ù–ê–ü–†–ê–í–õ–ï–ù–ò–Ø */

        .grid-dirs {

            display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin-top: 30px;

        }

        @media (max-width: 600px) { .grid-dirs { grid-template-columns: 1fr 1fr; } }



        .btn-dir {

            background: rgba(255,255,255,0.03); border: 1px solid var(--border);

            border-radius: 25px; padding: 25px 10px; text-align: center;

            font-size: 11px; cursor: pointer; transition: 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);

            font-weight: 300; letter-spacing: 1px; color: rgba(255,255,255,0.7);

        }

        .btn-dir.active {

            background: #fff; color: #000; font-weight: 600;

            box-shadow: 0 15px 30px rgba(176, 133, 255, 0.3); transform: scale(1.05);

        }



        .tag { font-size: 10px; letter-spacing: 3px; color: var(--accent); font-weight: 600; text-transform: uppercase; margin-bottom: 20px; display: block; }

        

        .main-stat { font-size: 64px; font-weight: 100; margin: 20px 0; letter-spacing: -3px; }

        .main-stat span { font-size: 20px; color: #555; letter-spacing: 1px; }



        .bio-content { font-size: 15px; line-height: 1.8; font-weight: 300; color: rgba(255,255,255,0.85); min-height: 120px; }

        .bio-content b { color: var(--accent); font-weight: 600; }



        /* –ü–ê–ù–ï–õ–¨ –í–í–û–î–ê */

        .input-panel {

            margin-top: 35px; padding-top: 30px; border-top: 1px solid var(--border);

            display: none;

        }

        .input-panel.visible { display: block; animation: fadeInUp 0.6s ease forwards; }

        

        @keyframes fadeInUp {

            from { opacity: 0; transform: translateY(20px); }

            to { opacity: 1; transform: translateY(0); }

        }



        .f-input {

            width: 100%; background: transparent; border: none; border-bottom: 2px solid var(--accent);

            color: #fff; font-size: 36px; padding: 15px 0; outline: none; font-family: inherit;

            text-align: center; font-weight: 200;

        }



        .save-btn {

            width: 100%; background: #fff; color: #000; border: none; padding: 25px;

            border-radius: 30px; font-weight: 600; text-transform: uppercase; letter-spacing: 3px;

            margin-top: 30px; cursor: pointer; transition: 0.3s;

        }

        .save-btn:active { transform: scale(0.98); opacity: 0.8; }



        /* –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û */

        .modal {

            position: fixed; top: 0; left: 0; width: 100%; height: 100%;

            background: rgba(0,0,0,0.9); backdrop-filter: blur(25px);

            z-index: 2000; display: none; align-items: center; justify-content: center;

        }

        .modal-card {

            background: rgba(255,255,255,0.03); border: 1px solid #fff; border-radius: 50px;

            padding: 60px 40px; max-width: 450px; text-align: center; position: relative; margin: 25px;

        }

        .ms-title { font-weight: 100; font-size: 48px; margin: 20px 0; color: #fff; }

        .ms-compliment { color: var(--accent); font-style: italic; margin-top: 25px; font-size: 16px; }



        #chartCanvas { height: 280px !important; }

        .stat-line { display: flex; justify-content: space-between; border-bottom: 1px solid rgba(255,255,255,0.08); padding: 12px 0; font-size: 12px; }

        .stat-line b { color: var(--accent); }

    </style>

</head>

<body>



    <div class="universe"></div>

    <div class="aurora-container"><div class="aurora"></div></div>

    <canvas id="starfield"></canvas>



    <header>

        <div class="logo-wrap"><img src="lady_logo.png" alt="LS"></div>

        <div class="h-title">–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç 2026</div>

        <div style="width: 48px; opacity: 0.5; font-size: 10px;">V.4.0</div>

    </header>



    <div class="container">

        <div class="col-left">

            <div class="glass-card" style="margin-bottom: 30px;">

                <span class="tag">–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞</span>

                <canvas id="chartCanvas"></canvas>

            </div>



            <div class="grid-dirs">

                <div class="btn-dir" onclick="openBranch(this, 'abs')">–Ø–≥–æ–¥–∏—Ü—ã + –ü—Ä–µ—Å—Å</div>

                <div class="btn-dir" onclick="openBranch(this, 'spine')">–ó–¥–æ—Ä–æ–≤–∞—è —Å–ø–∏–Ω–∞</div>

                <div class="btn-dir" onclick="openBranch(this, 'stretch')">–®–ø–∞–≥–∞—Ç</div>

                <div class="btn-dir" onclick="openBranch(this, 'sky')">Sky Stretching</div>

                <div class="btn-dir" onclick="openBranch(this, 'tabata')">–¢–∞–±–∞—Ç–∞</div>

                <div class="btn-dir" onclick="openBranch(this, 'sculpt')">Body Sculpt</div>

            </div>

        </div>



        <div class="col-right">

            <div class="glass-card" style="margin-bottom: 30px; border-color: var(--accent);">

                <span class="tag">–ë–∏–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –ø–∞—Å–ø–æ—Ä—Ç</span>

                <div class="bio-content" id="bio-info">

                    –í—ã–±–µ—Ä–∏—Ç–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫, —á—Ç–æ–±—ã —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–ª–∞ –≤–ª–∏—è–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–æ–∫ –Ω–∞ –≤–∞—à—É —Ñ–∏–∑–∏–æ–ª–æ–≥–∏—é –∏ –∫–ª–µ—Ç–æ—á–Ω—ã–π –º–µ—Ç–∞–±–æ–ª–∏–∑–º.

                </div>

            </div>



            <div class="glass-card">

                <span class="tag">–†–µ–∑—É–ª—å—Ç–∞—Ç–∏–≤–Ω–æ—Å—Ç—å</span>

                <div class="main-stat" id="total-stat">0 <span>–∑–∞–Ω—è—Ç–∏–π</span></div>

                

                <div id="monthly-breakdown" style="margin-bottom: 25px;"></div>



                <div class="input-panel" id="input-block">

                    <span id="input-hint" style="font-size: 12px; display: block; margin-bottom: 15px; color: var(--accent); font-weight: 600;"></span>

                    <input type="number" class="f-input" id="val-entry" placeholder="0" pattern="\d*">

                    <button class="save-btn" onclick="saveSession()">–ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ</button>

                </div>

            </div>

        </div>

    </div>



    <div class="modal" id="milestone-modal" onclick="this.style.display='none'">

        <div class="modal-card">

            <span class="tag">–î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ</span>

            <h1 class="ms-title" id="ms-title">8</h1>

            <p id="ms-desc" style="font-weight: 300; line-height: 1.8; font-size: 15px; color: rgba(255,255,255,0.8);"></p>

            <div class="ms-compliment" id="ms-compliment"></div>

            <div style="margin-top: 40px; padding-top: 25px; border-top: 1px solid var(--border); font-size: 11px; letter-spacing: 3px; opacity: 0.6;">

                –ü–†–û–î–û–õ–ñ–ê–ô–¢–ï –≠–í–û–õ–Æ–¶–ò–Æ –¢–ï–õ–ê

            </div>

        </div>

    </div>



<script>

    const tg = window.Telegram.WebApp;

    tg.expand();



    // 1. –ü–û–õ–ù–´–ô DATA CENTER

    let db = JSON.parse(localStorage.getItem('ls_final_v4')) || {

        isFirst: true,

        yearly: [0,0,0,0,0,0,0,0,0,0,0,0], 

        dirs: { abs: 0, spine: 0, stretch: 0, sky: 0, tabata: 0, sculpt: 0 },

        levels: { abs: 0, spine: 0, stretch: 0, sky: 0, tabata: 0, sculpt: 0 } 

    };



    const compliments = [

        "–¢–≤–æ—è –≥—Ä–∞—Ü–∏—è ‚Äî —ç—Ç–æ –∏—Å–∫—É—Å—Å—Ç–≤–æ –≤ –¥–≤–∏–∂–µ–Ω–∏–∏! ‚ú®",

        "–î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞ ‚Äî –∫—Ä–∞—Ç—á–∞–π—à–∏–π –ø—É—Ç—å –∫ —Å–æ–≤–µ—Ä—à–µ–Ω—Å—Ç–≤—É. –¢—ã –º–æ–ª–æ–¥–µ—Ü! üå∏",

        "–¢–≤–æ–µ —Ç–µ–ª–æ –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ –∫–ª–µ—Ç–æ—á–Ω–æ–º —É—Ä–æ–≤–Ω–µ. –ì–æ—Ä–¥–∏–º—Å—è! üî•",

        "–≠—Ç–æ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤–¥–æ—Ö–Ω–æ–≤–ª—è–µ—Ç! –¢–æ–ª—å–∫–æ –≤–ø–µ—Ä–µ–¥! üöÄ",

        "–¢—ã —Å–æ–∑–¥–∞–µ—à—å –ª—É—á—à—É—é –≤–µ—Ä—Å–∏—é —Å–µ–±—è –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å. üßò‚Äç‚ôÄÔ∏è"

    ];



    const scienceMap = {

        abs: {

            info: "<b>–í–∏—Å—Ü–µ—Ä–∞–ª—å–Ω—ã–π –¥–µ—Ç–æ–∫—Å:</b> –ì–ª—É–±–æ–∫–æ–µ —Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ –º—ã—à—Ü –ø—Ä–µ—Å—Å–∞ —Å–æ–∑–¥–∞–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç –º–∞—Å—Å–∞–∂–∞ –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –æ—Ä–≥–∞–Ω–æ–≤, —É–ª—É—á—à–∞—è –∫—Ä–æ–≤–æ—Ç–æ–∫ –≤ –≤–æ—Ä–æ—Ç–Ω–æ–π –≤–µ–Ω–µ –ø–µ—á–µ–Ω–∏ –∏ —É—Å–∫–æ—Ä—è—è –æ–±–º–µ–Ω –≤–µ—â–µ—Å—Ç–≤.",

            ms8: "<b>–£—Ä–æ–≤–µ–Ω—å 1 (8 –∑–∞–Ω—è—Ç–∏–π):</b> –°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–ª—Å—è –º—ã—à–µ—á–Ω—ã–π –∫–æ—Ä—Å–µ—Ç, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞—á–∞–ª –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –æ—Ä–≥–∞–Ω—ã –≤ –∞–Ω–∞—Ç–æ–º–∏—á–µ—Å–∫–∏ –≤–µ—Ä–Ω–æ–º –ø–æ–ª–æ–∂–µ–Ω–∏–∏. –£–ª—É—á—à–∏–ª–∞—Å—å –æ—Å–∞–Ω–∫–∞.",

            ms16: "<b>–£—Ä–æ–≤–µ–Ω—å 2 (16 –∑–∞–Ω—è—Ç–∏–π):</b> –ü–ª–æ—Ç–Ω–æ—Å—Ç—å –º—ã—à–µ—á–Ω—ã—Ö –≤–æ–ª–æ–∫–æ–Ω –≤—ã—Ä–æ—Å–ª–∞. –ú–µ—Ç–∞–±–æ–ª–∏–∑–º –≤ –ø–æ–∫–æ–µ —É—Å–∫–æ—Ä–∏–ª—Å—è –Ω–∞ 7%. –¢–µ–ª–æ –Ω–∞—á–∞–ª–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ —Å–∂–∏–≥–∞—Ç—å –∫–∞–ª–æ—Ä–∏–∏ –¥–∞–∂–µ –≤–æ —Å–Ω–µ."

        },

        spine: {

            info: "<b>–ì–∏–¥—Ä–∞—Ç–∞—Ü–∏—è –¥–∏—Å–∫–æ–≤:</b> –î–≤–∏–∂–µ–Ω–∏—è –≤ –æ—Å–µ–≤–æ–π –ø–ª–æ—Å–∫–æ—Å—Ç–∏ –∑–∞—Å—Ç–∞–≤–ª—è—é—Ç –º–µ–∂–ø–æ–∑–≤–æ–Ω–æ—á–Ω—ã–µ —Ö—Ä—è—â–∏ –≤–ø–∏—Ç—ã–≤–∞—Ç—å –ø–∏—Ç–∞—Ç–µ–ª—å–Ω—É—é –∂–∏–¥–∫–æ—Å—Ç—å, –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—è –∏—Ö —Å—Ç–∞—Ä–µ–Ω–∏–µ –∏ '–≤—ã—Å—ã—Ö–∞–Ω–∏–µ'.",

            ms8: "<b>–£—Ä–æ–≤–µ–Ω—å 1 (8 –∑–∞–Ω—è—Ç–∏–π):</b> –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏–ª—Å—è –æ–±—ä–µ–º —Å–∏–Ω–æ–≤–∏–∞–ª—å–Ω–æ–π –∂–∏–¥–∫–æ—Å—Ç–∏ –≤ —Å—É—Å—Ç–∞–≤–∞—Ö –ø–æ–∑–≤–æ–Ω–æ—á–Ω–∏–∫–∞. –£—à–ª–∏ —É—Ç—Ä–µ–Ω–Ω–∏–µ —Å–∫–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏ –∏ –º—ã—à–µ—á–Ω—ã–µ –∑–∞–∂–∏–º—ã.",

            ms16: "<b>–£—Ä–æ–≤–µ–Ω—å 2 (16 –∑–∞–Ω—è—Ç–∏–π):</b> –î–µ–∫–æ–º–ø—Ä–µ—Å—Å–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞. –†–æ—Å—Ç –≤–∏–∑—É–∞–ª—å–Ω–æ —É–≤–µ–ª–∏—á–∏–ª—Å—è –∑–∞ —Å—á–µ—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–π –≤—ã—Å–æ—Ç—ã –º–µ–∂–ø–æ–∑–≤–æ–Ω–æ—á–Ω—ã—Ö –¥–∏—Å–∫–æ–≤."

        },

        stretch: {

            info: "<b>–ö–∞–ø–∏–ª–ª—è—Ä–Ω–∞—è —Å–µ—Ç—å:</b> –ì–ª—É–±–æ–∫–∞—è —Ä–∞—Å—Ç—è–∂–∫–∞ —Ä–∞–∑–±–ª–æ–∫–∏—Ä—É–µ—Ç —Å–¥–∞–≤–ª–µ–Ω–Ω—ã–µ –∫–∞–ø–∏–ª–ª—è—Ä—ã. –ú—ã—à—Ü—ã –Ω–∞—á–∏–Ω–∞—é—Ç –ø–æ–ª—É—á–∞—Ç—å –≤ 4 —Ä–∞–∑–∞ –±–æ–ª—å—à–µ –∫–∏—Å–ª–æ—Ä–æ–¥–∞ –∏ –Ω—É—Ç—Ä–∏–µ–Ω—Ç–æ–≤.",

            ms8: "<b>–£—Ä–æ–≤–µ–Ω—å 1 (8 –∑–∞–Ω—è—Ç–∏–π):</b> –§–∞—Å—Ü–∏–∏ —Å—Ç–∞–ª–∏ —ç–ª–∞—Å—Ç–∏—á–Ω—ã–º–∏. –£—à–µ–ª —ç—Ñ—Ñ–µ–∫—Ç '–¥–µ—Ä–µ–≤—è–Ω–Ω–æ–≥–æ —Ç–µ–ª–∞'. –õ–∏–º—Ñ–∞ –¥–≤–∏–∂–µ—Ç—Å—è —Å–≤–æ–±–æ–¥–Ω–æ, –æ—á–∏—â–∞—è —Ç–∫–∞–Ω–∏.",

            ms16: "<b>–£—Ä–æ–≤–µ–Ω—å 2 (16 –∑–∞–Ω—è—Ç–∏–π):</b> –¢–∫–∞–Ω–∏ —Å—Ç–∞–ª–∏ —à–µ–ª–∫–æ–≤–∏—Å—Ç—ã–º–∏. –¢–≤–æ–π –≥–æ—Ä–º–æ–Ω–∞–ª—å–Ω—ã–π —Ñ–æ–Ω —Å—Ç–∞–±–∏–ª–∏–∑–∏—Ä–æ–≤–∞–ª—Å—è –∑–∞ —Å—á–µ—Ç —É–ª—É—á—à–µ–Ω–∏—è –∫—Ä–æ–≤–æ—Å–Ω–∞–±–∂–µ–Ω–∏—è –æ—Ä–≥–∞–Ω–æ–≤ –º–∞–ª–æ–≥–æ —Ç–∞–∑–∞."

        },

        sky: {

            info: "<b>–ì—Ä–∞–≤–∏—Ç–∞—Ü–∏–æ–Ω–Ω–∞—è —Ä–∞–∑–≥—Ä—É–∑–∫–∞:</b> –†–∞–±–æ—Ç–∞ –≤ –≥–∞–º–∞–∫–µ —Å–Ω–∏–º–∞–µ—Ç –æ—Å–µ–≤–æ–µ –¥–∞–≤–ª–µ–Ω–∏–µ, –ø–æ–∑–≤–æ–ª—è—è —Å—É—Å—Ç–∞–≤–∞–º —Ä–∞—Å–∫—Ä—ã—Ç—å—Å—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –º—è–≥–∫–æ. –≠—Ç–æ '–ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞' –¥–ª—è –≤—Å–µ–π –Ω–µ—Ä–≤–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã.",

            ms8: "<b>–£—Ä–æ–≤–µ–Ω—å 1 (8 –∑–∞–Ω—è—Ç–∏–π):</b> –£–ª—É—á—à–∏–ª–∞—Å—å —Ä–∞–±–æ—Ç–∞ –≤–µ—Å—Ç–∏–±—É–ª—è—Ä–Ω–æ–≥–æ –∞–ø–ø–∞—Ä–∞—Ç–∞ –∏ –Ω–µ–π—Ä–æ–º—ã—à–µ—á–Ω–∞—è —Å–≤—è–∑—å. –¢–µ–ª–æ —Å—Ç–∞–ª–æ –±–æ–ª–µ–µ –ø–æ—Å–ª—É—à–Ω—ã–º –∏ –ª–µ–≥–∫–∏–º.",

            ms16: "<b>–£—Ä–æ–≤–µ–Ω—å 2 (16 –∑–∞–Ω—è—Ç–∏–π):</b> –õ–∏–º—Ñ–æ–¥—Ä–µ–Ω–∞–∂–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç –æ—Ç –ø–µ—Ä–µ–≤–µ—Ä–Ω—É—Ç—ã—Ö –ø–æ–∑ —Å—Ç–∞–ª –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–º. –õ–∏—Ü–æ –≤—ã–≥–ª—è–¥–∏—Ç —Å–≤–µ–∂–µ–µ, —É—à–ª–∏ –æ—Ç–µ–∫–∏ –∏ —Ç—è–∂–µ—Å—Ç—å –≤ –Ω–æ–≥–∞—Ö."

        },

        tabata: {

            info: "<b>–ú–∏—Ç–æ—Ö–æ–Ω–¥—Ä–∏–∞–ª—å–Ω—ã–π –≤–∑—Ä—ã–≤:</b> –í—ã—Å–æ–∫–æ–∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω—ã–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã –∑–∞—Å—Ç–∞–≤–ª—è—é—Ç –∫–ª–µ—Ç–∫–∏ –æ–±–Ω–æ–≤–ª—è—Ç—å —Å–≤–æ–∏ —ç–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–∏–µ —Å—Ç–∞–Ω—Ü–∏–∏ (–º–∏—Ç–æ—Ö–æ–Ω–¥—Ä–∏–∏) –≤ —É—Å–∫–æ—Ä–µ–Ω–Ω–æ–º —Ä–µ–∂–∏–º–µ.",

            ms8: "<b>–£—Ä–æ–≤–µ–Ω—å 1 (8 –∑–∞–Ω—è—Ç–∏–π):</b> –û–±—ä–µ–º –ª–µ–≥–∫–∏—Ö —É–≤–µ–ª–∏—á–∏–ª—Å—è. –°–µ—Ä–¥–µ—á–Ω–æ-—Å–æ—Å—É–¥–∏—Å—Ç–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å—Ç–∞–ª–∞ —Ä–∞–±–æ—Ç–∞—Ç—å —ç–∫–æ–Ω–æ–º–∏—á–Ω–µ–µ. –¢–≤–æ—è –≤—ã–Ω–æ—Å–ª–∏–≤–æ—Å—Ç—å –≤—ã—Ä–æ—Å–ª–∞ –Ω–∞ 25%.",

            ms16: "<b>–£—Ä–æ–≤–µ–Ω—å 2 (16 –∑–∞–Ω—è—Ç–∏–π):</b> –û—Ä–≥–∞–Ω–∏–∑–º –ø–µ—Ä–µ—à–µ–ª –≤ —Ä–µ–∂–∏–º –∂–∏—Ä–æ—Å–∂–∏–≥–∞–Ω–∏—è 'Afterburn'. –ö–∞–ª–æ—Ä–∏–∏ –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞—Å—Ö–æ–¥–æ–≤–∞—Ç—å—Å—è –≤ —Ç–µ—á–µ–Ω–∏–µ 24 —á–∞—Å–æ–≤ –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–π —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏."

        },

        sculpt: {

            info: "<b>–ú–∏–∫—Ä–æ—Ä–µ–ª—å–µ—Ñ:</b> –†–∞–±–æ—Ç–∞ —Å –º–∞–ª—ã–º –æ—Ç—è–≥–æ—â–µ–Ω–∏–µ–º —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –ø–ª–æ—Ç–Ω—ã–µ, '—Å—É—Ö–∏–µ' –º—ã—à—Ü—ã –±–µ–∑ –ª–∏—à–Ω–µ–≥–æ –æ–±—ä–µ–º–∞, —Å–æ–∑–¥–∞–≤–∞—è —Ç–æ—á–µ–Ω—ã–π —Å–∏–ª—É—ç—Ç.",

            ms8: "<b>–£—Ä–æ–≤–µ–Ω—å 1 (8 –∑–∞–Ω—è—Ç–∏–π):</b> –ú—ã—à–µ—á–Ω—ã–π —Ç–æ–Ω—É—Å —Å—Ç–∞–ª –∑–∞–º–µ—Ç–µ–Ω –≤–∏–∑—É–∞–ª—å–Ω–æ. –õ–∏–Ω–∏–∏ —Ç–µ–ª–∞ —Å—Ç–∞–ª–∏ –±–æ–ª–µ–µ —á–µ—Ç–∫–∏–º–∏, –∫–æ–∂–∞ –ø–æ–¥—Ç—è–Ω—É–ª–∞—Å—å –∏ —Å—Ç–∞–ª–∞ —É–ø—Ä—É–≥–æ–π.",

            ms16: "<b>–£—Ä–æ–≤–µ–Ω—å 2 (16 –∑–∞–Ω—è—Ç–∏–π):</b> –ö–∞—á–µ—Å—Ç–≤–æ —Ç–µ–ª–∞ —Ä–∞–¥–∏–∫–∞–ª—å–Ω–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å. –ü—Ä–æ—Ü–µ–Ω—Ç –ø–æ–¥–∫–æ–∂–Ω–æ–≥–æ –∂–∏—Ä–∞ —Å–Ω–∏–∑–∏–ª—Å—è, –ø—Ä–æ—è–≤–∏–ª—Å—è –±–ª–∞–≥–æ—Ä–æ–¥–Ω—ã–π —Ä–µ–ª—å–µ—Ñ —Ä—É–∫, –ø—Ä–µ—Å—Å–∞ –∏ –Ω–æ–≥."

        }

    };



    // 2. –ì–†–ê–§–ò–ö (CHART JS)

    const ctx = document.getElementById('chartCanvas').getContext('2d');

    const chart = new Chart(ctx, {

        type: 'bar',

        data: {

            labels: ['–Ø–Ω–≤','–§–µ–≤','–ú–∞—Ä','–ê–ø—Ä','–ú–∞–π','–ò—é–Ω','–ò—é–ª','–ê–≤–≥','–°–µ–Ω','–û–∫—Ç','–ù–æ—è','–î–µ–∫'],

            datasets: [{

                data: db.yearly,

                backgroundColor: 'rgba(176, 133, 255, 0.5)',

                borderColor: '#b085ff',

                borderWidth: 1,

                borderRadius: 10,

                hoverBackgroundColor: '#fff'

            }]

        },

        options: {

            responsive: true, maintainAspectRatio: false,

            scales: { 

                y: { display: false }, 

                x: { grid: {display: false}, ticks: {color: 'rgba(255,255,255,0.3)', font: {size: 10}} } 

            },

            plugins: { legend: { display: false } }

        }

    });



    // 3. –õ–û–ì–ò–ö–ê –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø

    let activeDir = '';

    const nowMonth = new Date().getMonth();



    function openBranch(btn, type) {

        document.querySelectorAll('.btn-dir').forEach(b => b.classList.remove('active'));

        btn.classList.add('active');

        activeDir = type;



        document.getElementById('bio-info').innerHTML = scienceMap[type]?.info;

        document.getElementById('input-block').classList.add('visible');

        document.getElementById('input-hint').innerText = db.isFirst ? "–í–≤–µ–¥–∏ –æ–±—â—É—é –±–∞–∑—É —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ —Å 1 —è–Ω–≤–∞—Ä—è" : `–ü—Ä–æ–≥—Ä–µ—Å—Å –≤ —ç—Ç–æ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏: ${db.dirs[type]}`;

        document.getElementById('val-entry').focus();

        

        // –°–∫—Ä–æ–ª–ª –∫ –≤–≤–æ–¥—É –Ω–∞ –º–æ–±–∏–ª–∫–∞—Ö

        if(window.innerWidth < 1000) {

            setTimeout(() => document.getElementById('input-block').scrollIntoView({behavior: "smooth"}), 300);

        }

    }



    function saveSession() {

        const val = parseInt(document.getElementById('val-entry').value) || 0;

        if(val <= 0) return;



        db.dirs[activeDir] += val;

        db.yearly[nowMonth] += val;



        // –ü–†–û–í–ï–†–ö–ê –£–†–û–í–ù–ï–ô (–õ–æ–≥–∏–∫–∞ 8+ –∏ 16+)

        const totalInDir = db.dirs[activeDir];

        if (totalInDir >= 8 && db.levels[activeDir] < 8) {

            db.levels[activeDir] = 8;

            triggerMilestone(activeDir, 8);

        } else if (totalInDir >= 16 && db.levels[activeDir] < 16) {

            db.levels[activeDir] = 16;

            triggerMilestone(activeDir, 16);

        }



        db.isFirst = false;

        document.getElementById('val-entry').value = '';

        updateAll();

        tg.HapticFeedback.notificationOccurred('success');

    }



    function triggerMilestone(type, count) {

        const msData = scienceMap[type];

        document.getElementById('ms-title').innerText = count + ' –ó–ê–ù–Ø–¢–ò–ô';

        document.getElementById('ms-desc').innerHTML = (count === 8) ? msData.ms8 : msData.ms16;

        document.getElementById('ms-compliment').innerText = compliments[Math.floor(Math.random() * compliments.length)];

        document.getElementById('milestone-modal').style.display = 'flex';

    }



    function updateAll() {

        const total = Object.values(db.dirs).reduce((a, b) => a + b, 0);

        document.getElementById('total-stat').innerHTML = `${total} <span>–∑–∞–Ω—è—Ç–∏–π</span>`;

        

        const nMap = {abs:'–Ø–≥–æ–¥–∏—Ü—ã+–ü—Ä–µ—Å—Å', spine:'–ó–¥–æ—Ä–æ–≤–∞—è —Å–ø–∏–Ω–∞', stretch:'–®–ø–∞–≥–∞—Ç', sky:'Sky Stretching', tabata:'–¢–∞–±–∞—Ç–∞', sculpt:'Body Sculpt'};

        let html = '';

        for(let key in db.dirs) {

            if(db.dirs[key] > 0) {

                html += `<div class="stat-line"><span>${nMap[key]}</span> <b>${db.dirs[key]} –∑–∞–Ω.</b></div>`;

            }

        }

        document.getElementById('monthly-breakdown').innerHTML = html;

        chart.data.datasets[0].data = db.yearly;

        chart.update();



        localStorage.setItem('ls_final_v4', JSON.stringify(db));

    }



    // 4. –ó–í–ï–ó–î–ù–û–ï –ù–ï–ë–û (ENGINE)

    const sCanvas = document.getElementById('starfield');

    const sCtx = sCanvas.getContext('2d');

    let stars = [];



    function initStars() {

        sCanvas.width = window.innerWidth; sCanvas.height = window.innerHeight;

        stars = Array.from({length: 120}, () => ({

            x: Math.random() * sCanvas.width,

            y: Math.random() * sCanvas.height,

            size: Math.random() * 1.5,

            t: Math.random() * Math.PI * 2,

            speed: 0.01 + Math.random() * 0.02

        }));

    }



    function drawStars() {

        sCtx.clearRect(0, 0, sCanvas.width, sCanvas.height);

        stars.forEach(s => {

            sCtx.globalAlpha = (Math.sin(s.t) + 1) / 2;

            sCtx.beginPath();

            sCtx.arc(s.x, s.y, s.size, 0, Math.PI * 2);

            sCtx.fillStyle = "#fff";

            sCtx.fill();

            s.t += s.speed;

        });

        requestAnimationFrame(drawStars);

    }



    initStars(); drawStars(); window.onresize = initStars; updateAll();

</script>

</body>

</html>

