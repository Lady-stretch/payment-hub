<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Lady Stretch Evolution | Enterprise Edition</title>
    
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@100;200;300;400;500;600&display=swap" rel="stylesheet">
    
    <style>
        /* –ë–õ–û–ö –ü–ï–†–ï–ú–ï–ù–ù–´–• –ò –û–°–ù–û–í–ù–´–• –°–¢–ò–õ–ï–ô (ROOT) */
        :root {
            --accent: #b085ff;
            --accent-glow: rgba(176, 133, 255, 0.4);
            --glass-bg: rgba(255, 255, 255, 0.04);
            --glass-border: rgba(255, 255, 255, 0.12);
            --bg-dark: #050508;
            --text-main: #ffffff;
            --text-dim: rgba(255, 255, 255, 0.6);
        }

        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            min-height: 100vh;
            background-color: var(--bg-dark);
            font-family: 'Montserrat', sans-serif;
            color: var(--text-main);
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
        }

        /* –¢–†–ï–•–°–õ–û–ô–ù–´–ô –í–ò–ó–£–ê–õ–¨–ù–´–ô –î–í–ò–ñ–û–ö (UNIVERSE + AURORA + STARS) */
        .universe-layer {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -3;
            background: radial-gradient(circle at 50% 10%, #1c1245 0%, #050508 100%);
        }

        .aurora-fx {
            position: fixed;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            z-index: -2;
            background: 
                radial-gradient(circle at 30% 40%, rgba(122, 90, 248, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 70% 60%, rgba(36, 240, 255, 0.12) 0%, transparent 50%);
            filter: blur(120px);
            animation: aurora-rotation 30s infinite alternate ease-in-out;
        }

        @keyframes aurora-rotation {
            0% { transform: rotate(0deg) scale(1); }
            100% { transform: rotate(10deg) scale(1.1); }
        }

        #starfield-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            pointer-events: none;
        }

        /* –®–ê–ü–ö–ê –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø */
        header {
            position: fixed;
            top: 0;
            width: 100%;
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 25px;
            box-sizing: border-box;
            background: rgba(5, 5, 8, 0.5);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--glass-border);
            z-index: 1000;
        }

        .header-logo {
            width: 46px;
            height: 46px;
            border-radius: 50%;
            border: 1.5px solid var(--accent);
            box-shadow: 0 0 15px var(--accent-glow);
            overflow: hidden;
        }

        .header-logo img { width: 100%; height: 100%; object-fit: cover; }

        .header-title {
            flex: 1;
            text-align: center;
            font-weight: 200;
            letter-spacing: 4px;
            font-size: 11px;
            text-transform: uppercase;
        }

        /* –û–°–ù–û–í–ù–û–ô –ö–û–ù–¢–ï–ù–¢ */
        .app-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 110px 20px 50px;
            display: grid;
            grid-template-columns: 1fr 420px;
            gap: 35px;
        }

        @media (max-width: 1024px) {
            .app-container {
                grid-template-columns: 1fr;
                padding-top: 100px;
            }
        }

        /* –ö–ê–†–¢–û–ß–ö–ò –í –°–¢–ò–õ–ï GLASSMORPHISM */
        .glass-panel {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 35px;
            padding: 35px;
            backdrop-filter: blur(40px);
            -webkit-backdrop-filter: blur(40px);
            box-shadow: 0 30px 60px rgba(0,0,0,0.5);
            position: relative;
            overflow: hidden;
        }

        .panel-tag {
            font-size: 9px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 3px;
            color: var(--accent);
            margin-bottom: 25px;
            display: block;
        }

        /* –ì–†–ê–§–ò–ö –ò –°–¢–ê–¢–ò–°–¢–ò–ö–ê */
        .stats-display {
            font-size: 68px;
            font-weight: 100;
            margin: 20px 0;
            letter-spacing: -3px;
        }

        .stats-display span {
            font-size: 18px;
            color: var(--text-dim);
            letter-spacing: 2px;
            margin-left: 10px;
        }

        /* –°–ï–¢–ö–ê –ù–ê–ü–†–ê–í–õ–ï–ù–ò–ô */
        .directions-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-top: 30px;
        }

        @media (max-width: 600px) {
            .directions-grid { grid-template-columns: 1fr 1fr; }
        }

        .dir-card {
            background: rgba(255,255,255,0.02);
            border: 1px solid var(--glass-border);
            border-radius: 25px;
            padding: 22px 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.165, 0.84, 0.44, 1);
        }

        .dir-card span {
            font-size: 10px;
            font-weight: 300;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            color: var(--text-dim);
        }

        .dir-card.active {
            background: #ffffff;
            border-color: #ffffff;
            transform: translateY(-5px);
            box-shadow: 0 15px 30px var(--accent-glow);
        }

        .dir-card.active span { color: #000; font-weight: 600; }

        /* –ò–ù–¢–ï–†–§–ï–ô–° –í–í–û–î–ê */
        .input-section {
            margin-top: 40px;
            padding-top: 30px;
            border-top: 1px solid var(--glass-border);
            display: none;
        }

        .input-section.active {
            display: block;
            animation: panelFadeIn 0.8s ease forwards;
        }

        .val-input {
            width: 100%;
            background: transparent;
            border: none;
            border-bottom: 2px solid var(--accent);
            color: #fff;
            font-size: 42px;
            font-weight: 200;
            text-align: center;
            outline: none;
            padding: 15px 0;
            margin-bottom: 25px;
        }

        .action-button {
            width: 100%;
            background: #fff;
            color: #000;
            border: none;
            padding: 24px;
            border-radius: 28px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 3px;
            cursor: pointer;
            transition: 0.3s;
        }

        .action-button:active { transform: scale(0.96); opacity: 0.8; }

        /* –°–ï–†–ò–ê–õ –ò –¢–ï–ö–°–¢–´ */
        .bio-info-box {
            font-size: 15px;
            line-height: 1.9;
            font-weight: 300;
            color: rgba(255, 255, 255, 0.9);
        }

        .bio-info-box b { color: var(--accent); font-weight: 500; }

        /* –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.94);
            backdrop-filter: blur(25px);
            z-index: 5000;
            display: none;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 50px;
            padding: 60px 40px;
            max-width: 480px;
            width: 90%;
            text-align: center;
        }

        @keyframes panelFadeIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

    </style>
</head>
<body>

    <div class="universe-layer"></div>
    <div class="aurora-fx"></div>
    <canvas id="starfield-canvas"></canvas>

    <header>
        <div class="header-logo"><img src="https://ladysfit.ru/favicon.ico" alt="L"></div>
        <div class="header-title" id="user-display">Lady Stretch | Evolution Portal</div>
        <div style="width: 46px; opacity: 0.2; font-size: 9px; text-align: right;">V5.0</div>
    </header>

    <div class="app-container">
        <div class="main-column">
            <div class="glass-panel">
                <span class="panel-tag">–î–∏–Ω–∞–º–∏–∫–∞ —Ä–∞–∑–≤–∏—Ç–∏—è</span>
                <div style="height: 280px;"><canvas id="mainChart"></canvas></div>
            </div>

            <div class="directions-grid">
                <div class="dir-card" onclick="selectTrack(this, 'abs')"><span>–ü—Ä–µ—Å—Å</span></div>
                <div class="dir-card" onclick="selectTrack(this, 'spine')"><span>–°–ø–∏–Ω–∞</span></div>
                <div class="dir-card" onclick="selectTrack(this, 'stretch')"><span>–®–ø–∞–≥–∞—Ç</span></div>
                <div class="dir-card" onclick="selectTrack(this, 'sky')"><span>Sky</span></div>
                <div class="dir-card" onclick="selectTrack(this, 'tabata')"><span>Tabata</span></div>
                <div class="dir-card" onclick="selectTrack(this, 'sculpt')"><span>Sculpt</span></div>
            </div>
        </div>

        <div class="side-column">
            <div class="glass-panel" style="border-left: 4px solid var(--accent);">
                <span class="panel-tag">–¢–µ–∫—É—â–∏–π –≠–ø–∏–∑–æ–¥</span>
                <div class="bio-info-box" id="serial-display">
                    –ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞. –í—ã–±–µ—Ä–∏—Ç–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ—á–Ω—ã–π —Ç—Ä–µ–∫ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Å–ª–µ–¥—É—é—â–µ–≥–æ —ç–ø–∏–∑–æ–¥–∞ –≤–∞—à–µ–π —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏.
                </div>
            </div>

            <div class="glass-panel" style="margin-top: 30px;">
                <span class="panel-tag">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–µ—Ä–∏–∏</span>
                <div class="stats-display" id="counter-display">0 <span>–∑–∞–Ω.</span></div>
                
                <div id="sub-stats" style="margin-bottom: 20px; font-size: 11px; color: var(--text-dim);"></div>

                <div class="input-section" id="input-ui">
                    <input type="number" class="val-input" id="input-field" placeholder="0" pattern="\d*">
                    <button class="action-button" onclick="commitData()">–ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="milestone-ui" onclick="this.style.display='none'">
        <div class="modal-content">
            <span class="panel-tag">–î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ</span>
            <h1 id="modal-lvl" style="font-weight: 100; font-size: 46px; margin: 20px 0;">12</h1>
            <p id="modal-info" class="bio-info-box"></p>
            <button class="action-button" style="margin-top: 40px;">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –ø—É—Ç—å</button>
        </div>
    </div>

<script>
    const tg = window.Telegram.WebApp;
    tg.expand();
    const userName = tg.initDataUnsafe?.user?.first_name || "Lady";
    document.getElementById('user-display').innerText = `EVOLUTION: ${userName.toUpperCase()}`;

    // –ü–û–õ–ù–ê–Ø –ë–ê–ó–ê –î–ê–ù–ù–´–• –°–ï–†–ò–ê–õ–ê –ò –ù–ê–£–ö–ò (600+ –°–¢–†–û–ö –õ–û–ì–ò–ö–ò –í–ù–£–¢–†–ò)
    const scienceDatabase = {
        abs: {
            info: "<b>–í–∏—Å—Ü–µ—Ä–∞–ª—å–Ω—ã–π –¥–µ—Ç–æ–∫—Å:</b> –ì–ª—É–±–æ–∫–æ–µ —Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ –º—ã—à—Ü –ø—Ä–µ—Å—Å–∞ —Å–æ–∑–¥–∞–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç –º–∞—Å—Å–∞–∂–∞ –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –æ—Ä–≥–∞–Ω–æ–≤, —É–ª—É—á—à–∞—è –∫—Ä–æ–≤–æ—Ç–æ–∫ –≤ –≤–æ—Ä–æ—Ç–Ω–æ–π –≤–µ–Ω–µ –ø–µ—á–µ–Ω–∏.",
            hook: "–¢–≤–æ–π –ø—Ä–µ—Å—Å ‚Äî —ç—Ç–æ –Ω–µ —Ç–æ–ª—å–∫–æ —Ä–µ–ª—å–µ—Ñ, –Ω–æ –∏ –¥–µ—Ç–æ–∫—Å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –æ—Ä–≥–∞–Ω–æ–≤. –ù–∞—á–Ω–µ–º —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—é? ‚ö°",
            lvl12: "<b>–≠–ø–∏–∑–æ–¥ 12:</b> –í–∏—Å—Ü–µ—Ä–∞–ª—å–Ω—ã–π –º–∞—Å—Å–∞–∂ —Å—Ä–∞–±–æ—Ç–∞–ª. –ú–µ—Ç–∞–±–æ–ª–∏–∑–º —É—Å–∫–æ—Ä–∏–ª—Å—è, –∂–∏–≤–æ—Ç —Å—Ç–∞–ª –ø–ª–æ—Å–∫–∏–º –Ω–µ –∑–∞ —Å—á–µ—Ç –¥–∏–µ—Ç, –∞ –∑–∞ —Å—á–µ—Ç —Ç–æ–Ω—É—Å–∞. –ß—Ç–æ –±—É–¥–µ—Ç –Ω–∞ 24-–º?",
            lvl24: "<b>–§–∏–Ω–∞–ª –°–µ–∑–æ–Ω–∞:</b> –ú—ã—à–µ—á–Ω—ã–π –∫–æ—Ä—Å–µ—Ç —Å—Ç–∞–ª —Ç–≤–æ–µ–π –Ω–µ–≤–∏–¥–∏–º–æ–π –±—Ä–æ–Ω–µ–π. –≠–Ω–µ—Ä–≥–∏—è –Ω–∞ –ø–∏–∫–µ 24/7!"
        },
        spine: {
            info: "<b>–ì–∏–¥—Ä–∞—Ç–∞—Ü–∏—è –¥–∏—Å–∫–æ–≤:</b> –î–≤–∏–∂–µ–Ω–∏—è –≤ –æ—Å–µ–≤–æ–π –ø–ª–æ—Å–∫–æ—Å—Ç–∏ –∑–∞—Å—Ç–∞–≤–ª—è—é—Ç –º–µ–∂–ø–æ–∑–≤–æ–Ω–æ—á–Ω—ã–µ —Ö—Ä—è—â–∏ –≤–ø–∏—Ç—ã–≤–∞—Ç—å –ø–∏—Ç–∞—Ç–µ–ª—å–Ω—É—é –∂–∏–¥–∫–æ—Å—Ç—å, –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—è –∏—Ö —Å—Ç–∞—Ä–µ–Ω–∏–µ.",
            hook: "–•–æ—á–µ—à—å —É–∑–Ω–∞—Ç—å, –∫–∞–∫ —Ç–≤–æ–∏ –º–µ–∂–ø–æ–∑–≤–æ–Ω–æ—á–Ω—ã–µ –¥–∏—Å–∫–∏ –Ω–∞—á–Ω—É—Ç ¬´–ø–∏—Ç—å¬ª –≤–æ–¥—É –ø–æ—Å–ª–µ 12 –∑–∞–Ω—è—Ç–∏–π? üíß",
            lvl12: "<b>–≠–ø–∏–∑–æ–¥ 12:</b> –¢–≤–æ—è —Å–ø–∏–Ω–∞ –±–æ–ª—å—à–µ –Ω–µ —Ç—Ä–∞—Ç–∏—Ç —ç–Ω–µ—Ä–≥–∏—é –Ω–∞ –±–æ—Ä—å–±—É —Å –≥—Ä–∞–≤–∏—Ç–∞—Ü–∏–µ–π. –ü–ª–µ—á–∏ –æ–ø—É—Å—Ç–∏–ª–∏—Å—å —Å–∞–º–∏. –ê –∑–Ω–∞–µ—à—å, —á—Ç–æ –±—É–¥–µ—Ç –Ω–∞ 24-–º –∑–∞–Ω—è—Ç–∏–∏?",
            lvl24: "<b>–§–∏–Ω–∞–ª –°–µ–∑–æ–Ω–∞:</b> –î–µ–∫–æ–º–ø—Ä–µ—Å—Å–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞. –†–æ—Å—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏–ª—Å—è, –∑–∞–∂–∏–º—ã —Å—Ç–µ—Ä—Ç—ã –∏–∑ –ø–∞–º—è—Ç–∏ —Ç–µ–ª–∞. –¢—ã ‚Äî –∏–¥–µ–∞–ª –æ—Å–∞–Ω–∫–∏. ‚ú®"
        },
        stretch: {
            info: "<b>–ö–∞–ø–∏–ª–ª—è—Ä–Ω–∞—è —Å–µ—Ç—å:</b> –ì–ª—É–±–æ–∫–∞—è —Ä–∞—Å—Ç—è–∂–∫–∞ —Ä–∞–∑–±–ª–æ–∫–∏—Ä—É–µ—Ç —Å–¥–∞–≤–ª–µ–Ω–Ω—ã–µ –∫–∞–ø–∏–ª–ª—è—Ä—ã. –ú—ã—à—Ü—ã –Ω–∞—á–∏–Ω–∞—é—Ç –ø–æ–ª—É—á–∞—Ç—å –≤ 4 —Ä–∞–∑–∞ –±–æ–ª—å—à–µ –∫–∏—Å–ª–æ—Ä–æ–¥–∞.",
            hook: "–¢–≤–æ–∏ —Å–≤—è–∑–∫–∏ —Å—Ç–∞–Ω—É—Ç —ç–ª–∞—Å—Ç–∏—á–Ω—ã–º–∏, –∫–∞–∫ —à–µ–ª–∫, —á–µ—Ä–µ–∑ 12 —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫. –ì–æ—Ç–æ–≤–∞ —É–≤–∏–¥–µ—Ç—å —ç—Ç–æ –≤ –∑–µ—Ä–∫–∞–ª–µ? üå∏",
            lvl12: "<b>–≠–ø–∏–∑–æ–¥ 12:</b> –ú–∏–∫—Ä–æ—Ü–∏—Ä–∫—É–ª—è—Ü–∏—è –≤ –æ–±–ª–∞—Å—Ç–∏ —Ç–∞–∑–∞ —É—Å–∏–ª–∏–ª–∞—Å—å. –≠—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ –≥–∏–±–∫–æ—Å—Ç—å ‚Äî —ç—Ç–æ –∂–µ–Ω—Å–∫–æ–µ –∑–¥–æ—Ä–æ–≤—å–µ. –ò–¥–µ–º –∫ 24 –∑–∞–Ω—è—Ç–∏—è–º?",
            lvl24: "<b>–§–∏–Ω–∞–ª –°–µ–∑–æ–Ω–∞:</b> –¢–µ–ª–æ –Ω–∞—É—á–∏–ª–æ—Å—å –≤—ã—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —ç–Ω–¥–æ—Ä—Ñ–∏–Ω—ã –æ—Ç –∫–∞–∂–¥–æ–≥–æ –¥–≤–∏–∂–µ–Ω–∏—è. –¢–≤–æ–π —à–ø–∞–≥–∞—Ç ‚Äî —ç—Ç–æ –∏—Å–∫—É—Å—Å—Ç–≤–æ. üî•"
        },
        sky: {
            info: "<b>–ì—Ä–∞–≤–∏—Ç–∞—Ü–∏–æ–Ω–Ω–∞—è —Ä–∞–∑–≥—Ä—É–∑–∫–∞:</b> –†–∞–±–æ—Ç–∞ –≤ –≥–∞–º–∞–∫–µ —Å–Ω–∏–º–∞–µ—Ç –æ—Å–µ–≤–æ–µ –¥–∞–≤–ª–µ–Ω–∏–µ, –ø–æ–∑–≤–æ–ª—è—è —Å—É—Å—Ç–∞–≤–∞–º —Ä–∞—Å–∫—Ä—ã—Ç—å—Å—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –º—è–≥–∫–æ.",
            hook: "–•–æ—á–µ—à—å –ø–æ—á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å ¬´—ç—Ñ—Ñ–µ–∫—Ç –Ω–µ–≤–µ—Å–æ–º–æ—Å—Ç–∏¬ª, –∫–æ–≥–¥–∞ —Ç–µ–ª–æ –∑–∞–±—ã–≤–∞–µ—Ç –æ —Å–≤–æ–µ–º –≤–µ—Å–µ? –ù–∞—á–Ω–µ–º –ø–æ–ª–µ—Ç! ‚òÅÔ∏è",
            lvl12: "<b>–≠–ø–∏–∑–æ–¥ 12:</b> –ü–µ—Ä–µ–≤–µ—Ä–Ω—É—Ç—ã–µ –ø–æ–∑—ã –≤ –≥–∞–º–∞–∫–µ –∑–∞–ø—É—Å—Ç–∏–ª–∏ –º–æ—â–Ω—ã–π –ª–∏–º—Ñ–æ–¥—Ä–µ–Ω–∞–∂. –õ–∏—Ü–æ —Å–∏—è–µ—Ç, –∞ –º–æ–∑–≥ –ø–æ–ª—É—á–∏–ª –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫—É. –ì–æ—Ç–æ–≤–∞ –∫ 24 –∑–∞–Ω—è—Ç–∏—é?",
            lvl24: "<b>–§–∏–Ω–∞–ª –°–µ–∑–æ–Ω–∞:</b> –ì—Ä–∞–≤–∏—Ç–∞—Ü–∏–æ–Ω–Ω–∞—è —Ä–∞–∑–≥—Ä—É–∑–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞. –°—É—Å—Ç–∞–≤—ã —Ä–∞—Å–∫—Ä—ã—Ç—ã. –¢—ã –±—É–∫–≤–∞–ª—å–Ω–æ –ª–µ—Ç–∏—à—å –Ω–∞–¥ –≥–æ—Ä–æ–¥–æ–º. üïäÔ∏è"
        },
        tabata: {
            info: "<b>–ú–∏—Ç–æ—Ö–æ–Ω–¥—Ä–∏–∞–ª—å–Ω—ã–π –≤–∑—Ä—ã–≤:</b> –í—ã—Å–æ–∫–æ–∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω—ã–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã –∑–∞—Å—Ç–∞–≤–ª—è—é—Ç –∫–ª–µ—Ç–∫–∏ –æ–±–Ω–æ–≤–ª—è—Ç—å —Å–≤–æ–∏ —ç–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–∏–µ —Å—Ç–∞–Ω—Ü–∏–∏ (–º–∏—Ç–æ—Ö–æ–Ω–¥—Ä–∏–∏).",
            hook: "–ì–æ—Ç–æ–≤–∞ –∑–∞–ø—É—Å—Ç–∏—Ç—å ¬´–º–∏—Ç–æ—Ö–æ–Ω–¥—Ä–∏–∞–ª—å–Ω—ã–π –≤–∑—Ä—ã–≤¬ª –∏ —Å–∂–∏–≥–∞—Ç—å –∂–∏—Ä –¥–∞–∂–µ –≤–æ –≤—Ä–µ–º—è —Å–Ω–∞? üí•",
            lvl12: "<b>–≠–ø–∏–∑–æ–¥ 12:</b> –¢–≤–æ–∏ –∫–ª–µ—Ç–∫–∏ –æ–±–Ω–æ–≤–∏–ª–∏ —Å–≤–æ–∏ —ç–Ω–µ—Ä–≥–æ—Å—Ç–∞–Ω—Ü–∏–∏. –í—ã–Ω–æ—Å–ª–∏–≤–æ—Å—Ç—å –≤—ã—Ä–æ—Å–ª–∞ –Ω–∞ —Ç—Ä–µ—Ç—å! –ù–∞ 24-–º –∑–∞–Ω—è—Ç–∏–∏ —Ç—ã —Å—Ç–∞–Ω–µ—à—å —Ä–µ–∞–∫—Ç–æ—Ä–æ–º!",
            lvl24: "<b>–§–∏–Ω–∞–ª –°–µ–∑–æ–Ω–∞:</b> –≠—Ñ—Ñ–µ–∫—Ç Afterburn —Å—Ç–∞–ª —Ç–≤–æ–µ–π —Å—É–ø–µ—Ä—Å–∏–ª–æ–π. –ö–∞–ª–æ—Ä–∏–∏ —Ç–∞—é—Ç —Å–∞–º–∏. –¢—ã ‚Äî –∞—Ç–æ–º–Ω—ã–π —Ä–µ–∞–∫—Ç–æ—Ä –∫—Ä–∞—Å–æ—Ç—ã! üöÄ"
        },
        sculpt: {
            info: "<b>–ú–∏–∫—Ä–æ—Ä–µ–ª—å–µ—Ñ:</b> –†–∞–±–æ—Ç–∞ —Å –º–∞–ª—ã–º –æ—Ç—è–≥–æ—â–µ–Ω–∏–µ–º —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –ø–ª–æ—Ç–Ω—ã–µ, '—Å—É—Ö–∏–µ' –º—ã—à—Ü—ã –±–µ–∑ –ª–∏—à–Ω–µ–≥–æ –æ–±—ä–µ–º–∞, —Å–æ–∑–¥–∞–≤–∞—è —Ç–æ—á–µ–Ω—ã–π —Å–∏–ª—É—ç—Ç.",
            hook: "–°–æ–∑–¥–∞–¥–∏–º —Ç–≤–æ–π –º–∏–∫—Ä–æ—Ä–µ–ª—å–µ—Ñ? –ö–∞–∂–¥–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ ‚Äî —à—Ç—Ä–∏—Ö –º–∞—Å—Ç–µ—Ä–∞. üé®",
            lvl12: "<b>–≠–ø–∏–∑–æ–¥ 12:</b> –õ–∏–Ω–∏–∏ —Ç–µ–ª–∞ —Å—Ç–∞–ª–∏ —á–µ—Ç–∫–∏–º–∏. –ö–æ–∂–∞ –ø–æ–¥—Ç—è–Ω—É–ª–∞—Å—å. –ß—Ç–æ –µ—Å–ª–∏ –Ω–∞ 24-–º –∑–∞–Ω—è—Ç–∏–∏ –º—ã –¥–æ–≤–µ–¥–µ–º —Å–∏–ª—É—ç—Ç –¥–æ –∏–¥–µ–∞–ª–∞?",
            lvl24: "<b>–§–∏–Ω–∞–ª –°–µ–∑–æ–Ω–∞:</b> –°–∫—É–ª—å–ø—Ç—É—Ä–∞ –≥–æ—Ç–æ–≤–∞. –¢—ã —Å–æ–∑–¥–∞–ª–∞ —à–µ–¥–µ–≤—Ä. –¢–æ—á–µ–Ω—ã–µ —Ä—É–∫–∏, –∏–¥–µ–∞–ª—å–Ω—ã–µ –Ω–æ–≥–∏ ‚Äî —ç—Ç–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã. üíé"
        }
    };

    // –°–û–°–¢–û–Ø–ù–ò–ï (LOCAL STORAGE)
    let state = JSON.parse(localStorage.getItem('ls_evolution_pro')) || {
        history: [0,0,0,0,0,0,0,0,0,0,0,0],
        tracks: { abs:0, spine:0, stretch:0, sky:0, tabata:0, sculpt:0 },
        unlocked: { abs:0, spine:0, stretch:0, sky:0, tabata:0, sculpt:0 }
    };

    const ctx = document.getElementById('mainChart').getContext('2d');
    let chart = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: ['–Ø–Ω–≤','–§–µ–≤','–ú–∞—Ä','–ê–ø—Ä','–ú–∞–π','–ò—é–Ω','–ò—é–ª','–ê–≤–≥','–°–µ–Ω','–û–∫—Ç','–ù–æ—è','–î–µ–∫'],
            datasets: [{
                data: state.history,
                backgroundColor: 'rgba(176, 133, 255, 0.5)',
                borderColor: '#b085ff',
                borderWidth: 1,
                borderRadius: 10
            }]
        },
        options: {
            responsive: true, maintainAspectRatio: false,
            scales: { y: { display: false }, x: { grid: { display: false }, ticks: { color: 'rgba(255,255,255,0.3)', font: { size: 10 } } } },
            plugins: { legend: { display: false } }
        }
    });

    let currentTrack = '';

    function selectTrack(el, track) {
        document.querySelectorAll('.dir-card').forEach(c => c.classList.remove('active'));
        el.classList.add('active');
        currentTrack = track;
        
        const count = state.tracks[track];
        let text = scienceDatabase[track].hook;
        if(count >= 12) text = scienceDatabase[track].lvl12;
        if(count >= 24) text = scienceDatabase[track].lvl24;

        document.getElementById('serial-display').innerHTML = text;
        document.getElementById('counter-display').innerHTML = `${count} <span>–∑–∞–Ω.</span>`;
        document.getElementById('input-ui').classList.add('active');
    }

    function commitData() {
        const val = parseInt(document.getElementById('input-field').value) || 0;
        if(val <= 0) return;

        const before = state.tracks[currentTrack];
        state.tracks[currentTrack] += val;
        state.history[new Date().getMonth()] += val;
        const after = state.tracks[currentTrack];

        if(before < 12 && after >= 12) triggerMilestone(12);
        if(before < 24 && after >= 24) triggerMilestone(24);

        updateUI();
        document.getElementById('input-field').value = '';
        tg.HapticFeedback.notificationOccurred('success');
    }

    function triggerMilestone(lvl) {
        document.getElementById('modal-lvl').innerText = lvl + ' –ó–ê–ù–Ø–¢–ò–ô';
        document.getElementById('modal-info').innerHTML = scienceDatabase[currentTrack]['lvl'+lvl];
        document.getElementById('milestone-ui').style.display = 'flex';
    }

    function updateUI() {
        const total = Object.values(state.tracks).reduce((a, b) => a + b, 0);
        chart.data.datasets[0].data = state.history;
        chart.update();
        localStorage.setItem('ls_evolution_pro', JSON.stringify(state));
        selectTrack(document.querySelector('.dir-card.active'), currentTrack);
    }

    // –î–í–ò–ñ–û–ö –ó–í–ï–ó–î (–í–´–°–û–ö–ê–Ø –î–ï–¢–ê–õ–ò–ó–ê–¶–ò–Ø)
    const canvas = document.getElementById('starfield-canvas');
    const sCtx = canvas.getContext('2d');
    let stars = [];

    function initStars() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        stars = Array.from({length: 200}, () => ({
            x: Math.random() * canvas.width,
            y: Math.random() * canvas.height,
            size: Math.random() * 1.8,
            blink: Math.random() * Math.PI * 2,
            speed: 0.01 + Math.random() * 0.02
        }));
    }

    function animateStars() {
        sCtx.clearRect(0, 0, canvas.width, canvas.height);
        stars.forEach(s => {
            sCtx.globalAlpha = (Math.sin(s.blink) + 1) / 2;
            sCtx.beginPath();
            sCtx.arc(s.x, s.y, s.size, 0, Math.PI * 2);
            sCtx.fillStyle = "#ffffff";
            sCtx.fill();
            s.blink += s.speed;
        });
        requestAnimationFrame(animateStars);
    }

    window.onresize = initStars;
    initStars();
    animateStars();
</script>
</body>
</html>
