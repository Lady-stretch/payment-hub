<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Lady Stretch | Premium Club</title>
    
    <link rel="icon" type="image/png" href="https://img.icons8.com/ios-filled/50/7a5af8/sparkling-diamond.png">
    
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --bg: #08080a;
            --accent: #7a5af8;
            --glass: rgba(255, 255, 255, 0.03);
            --glass-border: rgba(255, 255, 255, 0.07);
            --text-dim: #8e8e93;
        }

        body {
            background: var(--bg);
            background-image: radial-gradient(circle at 50% -20%, #1e1e3f 0%, #08080a 100%);
            color: #fff;
            font-family: 'Montserrat', sans-serif;
            margin: 0; padding: 0; min-height: 100vh;
            -webkit-font-smoothing: antialiased;
        }

        .container { padding: 20px; max-width: 420px; margin: 0 auto; }

        /* ЛОГОТИП */
        .logo-box { text-align: center; margin-bottom: 25px; }
        .logo-box img { max-width: 160px; filter: drop-shadow(0 0 15px rgba(122, 90, 248, 0.4)); }

        /* ЭФФЕКТ ЖИДКОГО СТЕКЛА */
        .glass-card {
            background: var(--glass);
            backdrop-filter: blur(25px);
            -webkit-backdrop-filter: blur(25px);
            border: 1px solid var(--glass-border);
            border-radius: 30px;
            padding: 24px;
            margin-bottom: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.4);
            position: relative;
            overflow: hidden;
        }

        .glass-card::before {
            content: ""; position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(135deg, rgba(255,255,255,0.05) 0%, rgba(255,255,255,0) 100%);
            pointer-events: none;
        }

        .label { font-size: 0.65rem; color: var(--text-dim); text-transform: uppercase; letter-spacing: 2px; font-weight: 700; margin-bottom: 12px; display: block; }

        /* СТИЛЬНЫЙ СЕЛЕКТОР */
        select {
            width: 100%; background: rgba(255,255,255,0.05); border: 1px solid var(--glass-border);
            border-radius: 15px; color: #fff; padding: 14px; font-size: 0.9rem; outline: none; appearance: none;
            margin-bottom: 15px; font-family: inherit;
        }

        .input-row { display: flex; gap: 10px; }
        input {
            flex: 1; background: rgba(255,255,255,0.03); border: 1px solid var(--glass-border);
            border-radius: 15px; color: #fff; padding: 14px; font-size: 1rem; outline: none;
        }

        .btn-action {
            background: #fff; color: #000; border: none; padding: 0 25px; border-radius: 15px;
            font-weight: 700; font-size: 0.9rem; cursor: pointer; transition: 0.3s;
        }
        .btn-action:active { transform: scale(0.95); opacity: 0.8; }

        /* ПРОГРЕСС 96 */
        .progress-info { display: flex; justify-content: space-between; align-items: flex-end; margin-bottom: 10px; }
        .count-num { font-size: 1.8rem; font-weight: 700; color: var(--accent); }
        .bar-bg { height: 6px; background: rgba(255,255,255,0.05); border-radius: 10px; overflow: hidden; }
        .bar-fill { height: 100%; background: var(--accent); width: 0%; transition: 1.5s cubic-bezier(0.16, 1, 0.3, 1); box-shadow: 0 0 20px var(--accent); }

        .bio-note { font-size: 0.85rem; line-height: 1.6; color: #b0b0b5; border-left: 2px solid var(--accent); padding-left: 15px; }
    </style>
</head>
<body>

<div class="container">
    <div class="logo-box">
        <img src="https://ladysfit.ru/img/logo_white.png" alt="Lady Stretch">
    </div>

    <div class="glass-card">
        <div class="progress-info">
            <div>
                <span class="label">Твоя трансформация</span>
                <span class="count-num" id="current-cnt">14</span><span style="color:var(--text-dim)"> / 96</span>
            </div>
            <div style="font-size: 0.8rem; font-weight: 600; color: #7a5af8;">ELITE STATUS</div>
        </div>
        <div class="bar-bg">
            <div class="bar-fill" id="progress-bar"></div>
        </div>
    </div>

    <div class="glass-card">
        <span class="label">Выбери направление</span>
        <select id="workout-type" onchange="adjustUI()">
            <optgroup label="Мягкий фитнес">
                <option value="spine">Здоровая спина</option>
                <option value="pilates">Пилатес</option>
                <option value="mfr">МФР / Релакс</option>
            </optgroup>
            <optgroup label="Растяжка">
                <option value="stretch">Классический стретчинг</option>
                <option value="sky">Sky Stretching (Гамаки)</option>
                <option value="psr">Подкачка с растяжкой (ПСР)</option>
            </optgroup>
            <optgroup label="Интенсив">
                <option value="abs">Ягодицы + Пресс (ЯП)</option>
                <option value="tabata">Табата / Функционал</option>
                <option value="circle">Круговая тренировка</option>
                <option value="sculpt">Body Sculpt</option>
            </optgroup>
        </select>

        <span class="label" id="val-label">Твоё состояние (1-10)</span>
        <div class="input-row">
            <input type="number" id="workout-val" placeholder="Оцени себя">
            <button class="btn-action" onclick="sendData()">OK</button>
        </div>
    </div>

    <div class="glass-card">
        <span class="label">Динамика обновлений</span>
        <div id="main-chart"></div>
    </div>

    <div class="glass-card">
        <span class="label">Биохакинг тела</span>
        <div class="bio-note" id="hook-text">
            После тренировки <b>Body Sculpt</b> твой метаболизм ускорен на 15%. Организм продолжает сжигать калории даже в покое.
        </div>
    </div>
</div>

<script>
    const tg = window.Telegram.WebApp;
    tg.expand();
    tg.headerColor = '#08080a';

    // Анимация прогресса (замени цифру 14 на данные из базы)
    setTimeout(() => {
        const count = 14; 
        document.getElementById('progress-bar').style.width = (count / 96 * 100) + '%';
        document.getElementById('current-cnt').innerText = count;
    }, 500);

    function adjustUI() {
        const type = document.getElementById('workout-type').value;
        const label = document.getElementById('val-label');
        if(['stretch', 'sky'].includes(type)) label.innerText = "Результат (см до пола)";
        else label.innerText = "Твоё состояние (1-10)";
    }

    // Премиальный график
    var options = {
        series: [{ name: 'Состояние', data: [4, 6, 5, 8, 7, 9, 10] }],
        chart: { type: 'area', height: 140, toolbar: {show: false}, sparklines: {enabled: true} },
        colors: ['#7a5af8'],
        stroke: { curve: 'smooth', width: 3 },
        fill: { type: 'gradient', gradient: { opacityFrom: 0.5, opacityTo: 0 } },
        tooltip: { enabled: false }
    };
    new ApexCharts(document.querySelector("#main-chart"), options).render();

    function sendData() {
        const val = document.getElementById('workout-val').value;
        const type = document.getElementById('workout-type').value;
        if(!val) return;

        tg.HapticFeedback.notificationOccurred('success');
        tg.sendData(JSON.stringify({
            action: "log_workout",
            type: type,
            value: val
        }));
        tg.close();
    }
</script>
</body>
</html>
