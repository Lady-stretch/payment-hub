<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Lady Stretch | Biohacking App</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&family=Playfair+Display:ital,wght@0,700;1,700&display=swap" rel="stylesheet">
    <style>
        :root {
            --glass: rgba(255, 255, 255, 0.1);
            --glass-border: rgba(255, 255, 255, 0.2);
            --accent: #e198b1; /* –§–∏—Ä–º–µ–Ω–Ω—ã–π Lady Stretch */
            --bg: #0a0a0b;
            --text: #ffffff;
            --safe: #4ade80;
            --warning: #fbbf24;
            --danger: #f87171;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--bg);
            background-image: radial-gradient(circle at top right, #1a1a1c, #0a0a0b);
            color: var(--text);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* --- SPLASH SCREEN (HOLLYWOOD STYLE) --- */
        #splash {
            position: fixed;
            inset: 0;
            background: #000;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            transition: opacity 1s ease-out;
        }

        .logo-anim {
            font-family: 'Playfair Display', serif;
            font-size: 3rem;
            letter-spacing: 8px;
            background: linear-gradient(to bottom, #fff, #888);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            opacity: 0;
            transform: scale(0.9);
            animation: cinematic 3s forwards ease-in-out;
        }

        @keyframes cinematic {
            0% { opacity: 0; transform: scale(0.8); filter: blur(10px); }
            50% { opacity: 1; filter: blur(0px); }
            100% { opacity: 1; transform: scale(1); }
        }

        /* --- LAYOUT --- */
        .container {
            padding: 20px;
            max-width: 500px;
            margin: 0 auto;
            display: none; /* –ü–æ–∫–∞–∂–µ—Ç –ø–æ—Å–ª–µ —Å–ø–ª—ç—à–∞ */
        }

        header {
            position: sticky;
            top: 10px;
            z-index: 100;
            backdrop-filter: blur(15px);
            background: var(--glass);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 15px;
            text-align: center;
            margin-bottom: 25px;
        }

        header h1 {
            font-family: 'Playfair Display', serif;
            font-size: 1.5rem;
            letter-spacing: 2px;
        }

        .glass-card {
            background: var(--glass);
            backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            border-radius: 24px;
            padding: 20px;
            margin-bottom: 20px;
        }

        /* --- UI ELEMENTS --- */
        .btn-group { display: flex; gap: 10px; margin-bottom: 15px; }
        .btn {
            flex: 1;
            padding: 15px;
            border-radius: 15px;
            border: 1px solid var(--glass-border);
            background: var(--glass);
            color: #fff;
            font-weight: 600;
            cursor: pointer;
            transition: 0.3s;
        }
        .btn.active { background: var(--accent); border-color: var(--accent); }

        .input-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; margin-top: 15px; }
        .input-box { text-align: center; }
        .input-box label { display: block; font-size: 0.7rem; opacity: 0.6; margin-bottom: 5px; }
        .input-box input {
            width: 100%;
            background: rgba(255,255,255,0.05);
            border: 1px solid var(--glass-border);
            border-radius: 10px;
            padding: 10px;
            color: #fff;
            text-align: center;
            font-size: 1.1rem;
        }

        /* --- CALCULATOR RESULTS --- */
        .results-bar {
            display: flex;
            justify-content: space-between;
            margin-top: 25px;
            padding-top: 20px;
            border-top: 1px solid var(--glass-border);
        }
        .res-item { text-align: center; }
        .res-val { display: block; font-size: 1.2rem; font-weight: 700; color: var(--accent); }
        .res-lbl { font-size: 0.65rem; opacity: 0.6; text-transform: uppercase; }

        .expert-box {
            margin-top: 20px;
            padding-left: 15px;
            border-left: 3px solid var(--safe);
            font-size: 0.9rem;
            line-height: 1.4;
            transition: 0.5s;
        }

        /* --- TRAINING GRID --- */
        .train-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }
        .train-btn {
            padding: 12px;
            font-size: 0.8rem;
            text-align: left;
            border-radius: 12px;
            background: rgba(255,255,255,0.03);
            border: 1px solid var(--glass-border);
            color: #ccc;
        }

        /* --- MODAL --- */
        .modal {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.8);
            backdrop-filter: blur(10px);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 200;
            padding: 20px;
        }
        .modal-content {
            background: linear-gradient(135deg, rgba(40,40,45,0.9), rgba(20,20,22,0.9));
            border: 1px solid var(--accent);
            padding: 30px;
            border-radius: 30px;
            width: 100%;
            max-width: 400px;
            text-align: center;
        }

        /* --- CHARTS (DUMMY) --- */
        .chart-placeholder {
            height: 100px;
            background: linear-gradient(90deg, transparent 0%, rgba(225,152,177,0.1) 50%, transparent 100%);
            border-radius: 15px;
            margin-top: 10px;
            position: relative;
            overflow: hidden;
        }

        .reset-btn {
            margin-top: 30px;
            width: 100%;
            background: transparent;
            color: #555;
            border: none;
            text-decoration: underline;
            font-size: 0.8rem;
        }
    </style>
</head>
<body>

    <div id="splash">
        <div class="logo-anim">LADY STRETCH</div>
        <p style="letter-spacing: 3px; font-size: 0.7rem; opacity: 0.5; margin-top: 10px;">EST. 2026 | PREMIUM BIOHACKING</p>
    </div>

    <div class="container" id="mainApp">
        <header>
            <h1>LADY STRETCH</h1>
        </header>

        <div class="glass-card">
            <div class="btn-group">
                <button class="btn active" onclick="setGender('female', this)">WOMAN</button>
                <button class="btn" onclick="setGender('male', this)">MAN</button>
            </div>
            <button class="btn" style="width: 100%; margin-bottom: 15px;" onclick="openModal('activityModal')">ACTIVITY: <span id="actLbl">Medium</span></button>
            
            <div class="input-grid">
                <div class="input-box">
                    <label>WEIGHT (KG)</label>
                    <input type="number" id="weight" value="60" oninput="calculate()">
                </div>
                <div class="input-box">
                    <label>HEIGHT (CM)</label>
                    <input type="number" id="height" value="170" oninput="calculate()">
                </div>
                <div class="input-box">
                    <label>AGE</label>
                    <input type="number" id="age" value="25" oninput="calculate()">
                </div>
            </div>

            <div class="results-bar">
                <div class="res-item">
                    <span class="res-val" id="bmiVal">20.8</span>
                    <span class="res-lbl">BMI (–ò–ú–¢)</span>
                </div>
                <div class="res-item">
                    <span class="res-val" id="waterVal">2.1L</span>
                    <span class="res-lbl">WATER</span>
                </div>
                <div class="res-item">
                    <span class="res-val" id="kcalVal">1850</span>
                    <span class="res-lbl">KCAL</span>
                </div>
            </div>

            <div class="expert-box" id="expertBox">
                Your parameters are within the healthy range. Keep up the activity!
            </div>
            
            <div style="margin-top: 15px; display: flex; justify-content: space-around; font-size: 0.75rem;">
                <span>P: <b id="pVal">90g</b></span>
                <span>F: <b id="fVal">60g</b></span>
                <span>C: <b id="cVal">220g</b></span>
            </div>
        </div>

        <div class="glass-card">
            <h3 style="font-size: 0.9rem; margin-bottom: 15px; opacity: 0.8;">CURRENT RESOURCE</h3>
            <div class="btn-group">
                <button class="btn" onclick="setResource('low', this)">LOW</button>
                <button class="btn active" onclick="setResource('norm', this)">NORMAL</button>
                <button class="btn" onclick="setResource('peak', this)">PEAK</button>
            </div>

            <div class="train-grid" id="trainGrid">
                </div>
        </div>

        <div class="glass-card">
            <h3 style="font-size: 0.9rem; margin-bottom: 10px; opacity: 0.8;">BODY DYNAMICS</h3>
            <div class="chart-placeholder">
                <svg width="100%" height="100%" viewBox="0 0 100 40" preserveAspectRatio="none">
                    <path d="M0 35 Q 25 30, 50 20 T 100 5" fill="none" stroke="var(--accent)" stroke-width="2" />
                </svg>
            </div>
            <h3 style="font-size: 0.9rem; margin: 20px 0 10px 0; opacity: 0.8;">TRAINING FREQUENCY</h3>
            <div class="chart-placeholder">
                <div style="display:flex; align-items: flex-end; height: 100%; gap: 5px; padding: 10px;">
                    <div style="flex:1; height:40%; background: var(--glass-border); border-radius: 4px;"></div>
                    <div style="flex:1; height:70%; background: var(--accent); border-radius: 4px;"></div>
                    <div style="flex:1; height:55%; background: var(--glass-border); border-radius: 4px;"></div>
                    <div style="flex:1; height:90%; background: var(--accent); border-radius: 4px;"></div>
                </div>
            </div>

            <button class="btn active" style="width: 100%; margin-top: 25px;" onclick="window.open('https://ladystretch.ru', '_blank')">RENEW SUBSCRIPTION</button>
            <button class="reset-btn" onclick="resetData()">Reset all data</button>
        </div>
    </div>

    <div id="activityModal" class="modal" onclick="closeModal('activityModal')">
        <div class="modal-content" onclick="event.stopPropagation()">
            <h2 style="margin-bottom: 20px;">Daily Activity</h2>
            <button class="btn" style="width: 100%; margin-bottom: 10px;" onclick="setActivity(1.2, 'Low')">Low (Sedentary)</button>
            <button class="btn" style="width: 100%; margin-bottom: 10px;" onclick="setActivity(1.5, 'Medium')">Medium (Training)</button>
            <button class="btn" style="width: 100%; margin-bottom: 10px;" onclick="setActivity(1.9, 'High')">High (Pro Athlete)</button>
        </div>
    </div>

    <div id="levelModal" class="modal" onclick="closeModal('levelModal')">
        <div class="modal-content">
            <div style="font-size: 4rem; margin-bottom: 10px;">üèÜ</div>
            <h2 id="levelTitle">Level Up!</h2>
            <p id="levelDesc" style="margin: 15px 0; font-size: 0.9rem; opacity: 0.8;"></p>
            <button class="btn active" onclick="closeModal('levelModal')">ACCEPT</button>
        </div>
    </div>

    <script>
        let userData = {
            gender: 'female',
            activity: 1.5,
            actName: 'Medium',
            resource: 'norm',
            trainings: 0,
            level: 0
        };

        const levels = [
            { count: 0, name: 'Explorer', desc: 'Welcome! Your journey to a perfect body starts today.' },
            { count: 8, name: 'Adept', desc: '8 sessions done! Muscle elasticity increased by 15%, blood circulation improved.' },
            { count: 30, name: 'Transformation', desc: '30 sessions! Posture is stabilized, cortisol levels significantly lower.' },
            { count: 50, name: 'Master', desc: '50 sessions! Metabolism accelerated. You are in elite shape.' },
            { count: 100, name: 'Expert', desc: '100 sessions! New quality of life. Deep muscle core is indestructible.' },
            { count: 150, name: 'Legend', desc: '150 sessions! You are a Lady Stretch icon. Total body control.' }
        ];

        const trainMap = {
            relax: ["Pilates", "Stretching", "Classic Stretch", "MFR", "Sky Stretching", "Yoga Relax", "Healthy Back"],
            active: ["Power Stretch", "Circuit", "Body Sculpt", "Butts & Abs", "Tabata", "Functional"]
        };

        // Initialize
        window.onload = () => {
            setTimeout(() => {
                document.getElementById('splash').style.opacity = '0';
                setTimeout(() => {
                    document.getElementById('splash').style.display = 'none';
                    document.getElementById('mainApp').style.display = 'block';
                    renderTrainings();
                    calculate();
                }, 1000);
            }, 3000);
        };

        function setGender(g, el) {
            userData.gender = g;
            updateBtns(el);
            calculate();
        }

        function setActivity(val, name) {
            userData.activity = val;
            document.getElementById('actLbl').innerText = name;
            closeModal('activityModal');
            calculate();
        }

        function setResource(res, el) {
            userData.resource = res;
            updateBtns(el);
            renderTrainings();
        }

        function updateBtns(el) {
            [...el.parentElement.children].forEach(b => b.classList.remove('active'));
            el.classList.add('active');
        }

        function calculate() {
            const w = parseFloat(document.getElementById('weight').value);
            const h = parseFloat(document.getElementById('height').value);
            const a = parseFloat(document.getElementById('age').value);

            // BMI
            const bmi = (w / ((h/100)**2)).toFixed(1);
            document.getElementById('bmiVal').innerText = bmi;

            // Water
            const water = (w * 0.035).toFixed(1);
            document.getElementById('waterVal').innerText = water + 'L';

            // KCAL (Mifflin-St Jeor)
            let bmr = (10 * w) + (6.25 * h) - (5 * a);
            bmr = userData.gender === 'female' ? bmr - 161 : bmr + 5;
            const kcal = Math.round(bmr * userData.activity);
            document.getElementById('kcalVal').innerText = kcal;

            // Macros
            document.getElementById('pVal').innerText = Math.round(w * 1.5) + 'g';
            document.getElementById('fVal').innerText = Math.round(w * 0.8) + 'g';
            document.getElementById('cVal').innerText = Math.round((kcal - (w*1.5*4) - (w*0.8*9)) / 4) + 'g';

            // Expert Conclusion
            const box = document.getElementById('expertBox');
            if(bmi < 18.5) {
                box.innerText = "Underweight. Recommended: Power Stretch + focus on Proteins.";
                box.style.borderColor = 'var(--warning)';
            } else if(bmi > 25) {
                box.innerText = "Slightly above norm. Recommended: Active workouts (Tabata, Circuit) 3x/week.";
                box.style.borderColor = 'var(--danger)';
            } else {
                box.innerText = "Ideal BMI. Keep your current resource level with Stretching & Yoga.";
                box.style.borderColor = 'var(--safe)';
            }
        }

        function renderTrainings() {
            const grid = document.getElementById('trainGrid');
            grid.innerHTML = '';
            const list = userData.resource === 'peak' ? trainMap.active : trainMap.relax;
            
            list.forEach(t => {
                const btn = document.createElement('button');
                btn.className = 'train-btn';
                btn.innerHTML = `<b>${t}</b><br><span style="font-size:0.6rem; opacity:0.6">Tap to log session</span>`;
                btn.onclick = () => logTraining(t);
                grid.appendChild(btn);
            });
        }

        function logTraining(name) {
            userData.trainings++;
            checkLevel();
            alert(`Logged: ${name}. You've completed ${userData.trainings} sessions!`);
        }

        function checkLevel() {
            const nextLevel = levels.filter(l => userData.trainings >= l.count).pop();
            if (nextLevel && nextLevel.count !== userData.lastNotifiedLevel) {
                document.getElementById('levelTitle').innerText = nextLevel.name;
                document.getElementById('levelDesc').innerText = nextLevel.desc;
                openModal('levelModal');
                userData.lastNotifiedLevel = nextLevel.count;
            }
        }

        function openModal(id) { document.getElementById(id).style.display = 'flex'; }
        function closeModal(id) { document.getElementById(id).style.display = 'none'; }
        
        function resetData() {
            if(confirm('Reset all progress?')) {
                location.reload();
            }
        }
    </script>
</body>
</html>
